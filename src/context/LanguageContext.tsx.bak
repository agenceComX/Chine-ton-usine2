import React, { createContext, useContext, useState, useEffect } from 'react';
import { userService } from '../lib/services/userService';
import { UserLanguage } from '../types';
import { useAuth } from './AuthContext';

interface LanguageContextType {
  language: UserLanguage;
  setLanguage: (lang: UserLanguage) => void;
  t: (key: string) => string;
  languageNames: Record<UserLanguage, string>;
}

const translations: Record<UserLanguage, Record<string, string>> = {
  'fr': {
    'home': 'Accueil',
    'search': 'Recherche',
    'dashboard': 'Tableau de bord',
    'login': 'Connexion',
    'logout': 'Déconnexion',
    'discover': 'Découvrir',
    'search.title': 'Rechercher des produits',
    'search.filters.title': 'Filtres',
    'search.filter.title': 'Filtre',
    'search.filter.name': 'Nom du produit',
    'search.filter.category': 'Catégorie',
    'search.filter.moq': 'Quantité minimale',
    'search.filter.ce': 'Certifié CE',
    'search.filter.price': 'Fourchette de prix',
    'search.filter.priceRange': 'Fourchette de prix',
    'search.filter.minPrice': 'Prix minimum',
    'search.filter.maxPrice': 'Prix maximum',
    'search.filter.allPrices': 'Tous les prix',
    'search.filter.currencyLabel': 'Prix en',
    'search.filter.reset': 'Réinitialiser',
    'search.resetFiltersButton': 'Réinitialiser les filtres',
    'search.filter.apply': 'Appliquer',
    'search.filter.allCategories': 'Toutes les catégories',
    'search.placeholder.product': 'Rechercher un produit',
    'price': 'Prix',
    'moq': 'Quantité minimum',
    'contact': 'Contacter ce fournisseur',
    'notFoundTitle': 'Produit non trouvé',
    'backToSearch': 'Retour à la recherche',
    'backToResults': 'Retour aux résultats',
    'category': 'Catégorie',
    'unit': 'unité',
    'description': 'Description',
    'contactSupplier': 'Contacter le fournisseur',
    'requestSample': 'Demander un échantillon',
    'removeFromFavorites': 'Retirer des favoris',
    'addToFavorites': 'Ajouter aux favoris',
    'specifications': 'Spécifications',
    'noSpecifications': 'Aucune spécification disponible pour ce produit.',
    'messageSentConfirm': 'Message envoyé au fournisseur avec succès !',
    'yourMessage': 'Votre message',
    'messagePlaceholder': 'Écrivez votre message ici...',
    'cancel': 'Annuler',
    'send': 'Envoyer',
    'sampleRequestSentConfirm': 'Demande d\'échantillon envoyée au fournisseur avec succès !',
    'yourRequestDetails': 'Détails de votre demande',
    'sampleMessagePlaceholder': 'Veuillez préciser les détails de l\'échantillon (quantité, exigences spécifiques, etc.)...',
    'sendRequest': 'Envoyer la demande',
    'sampleRequestPrefix': 'Demande d\'échantillon',
    'minOrderQuantity': 'Quantité minimale de commande',
    'units': 'unités',
    'supplier': 'Fournisseur',
    'certifications': 'Certifications',
    'ceCertified': 'Certifié CE',
    'notCeCertified': 'Non certifié CE',
    'specs.brand': 'Marque',
    'specs.origin': 'Origine',
    'specs.style': 'Style',
    'specs.modelNumber': 'Numéro de modèle',
    'specs.application': 'Application',
    'specs.material': 'Matériau',
    'hideSpecs': 'Masquer les spécifications',
    'showAllSpecs': 'Afficher toutes les spécifications',
    'contactSupplierTitle': 'Contacter le fournisseur',
    'contactSupplierDescription': 'Envoyez un message au fournisseur pour plus d\'informations.',
    'yourMessagePlaceholder': 'Écrivez votre message ici...',
    'cancelButton': 'Annuler',
    'sendMessageButton': 'Envoyer le message',
    'messageSentConfirmation': 'Message envoyé avec succès !',
    'requestSampleTitle': 'Demander un échantillon',
    'requestSampleDescription': 'Demandez un échantillon de ce produit au fournisseur.',
    'yourSampleRequestMessagePlaceholder': 'Précisez les détails de votre demande d\'échantillon...',
    'sendRequestButton': 'Envoyer la demande',
    'requestSentConfirmation': 'Demande envoyée avec succès !',
    'auth.email': 'Email',
    'auth.password': 'Mot de passe',
    'auth.confirmPassword': 'Confirmer le mot de passe',
    'auth.login': 'Se connecter',
    'auth.loginDescription': 'Connectez-vous pour accéder à votre espace client',
    'auth.supplierLogin': 'Espace Fournisseur',
    'auth.supplierLoginDescription': 'Connectez-vous pour gérer vos produits et commandes',
    'auth.emailPlaceholder': 'votre@email.com',
    'auth.passwordPlaceholder': '••••••••',
    'auth.rememberMe': 'Se souvenir de moi',
    'auth.forgotPassword': 'Mot de passe oublié ?',
    'auth.register': 'S\'inscrire',
    'auth.noAccount': 'Pas encore de compte ?',
    'auth.noSupplierAccount': 'Vous n\'avez pas encore de compte fournisseur ?',
    'auth.contactSupplier': 'Contactez-nous pour devenir fournisseur',
    'auth.invalidCredentials': 'Email ou mot de passe incorrect.',
    'auth.error': 'Une erreur est survenue. Veuillez réessayer.',
    'auth.hasAccount': 'Déjà un compte ?',
    'auth.userDataError': 'Erreur lors de la récupération des données utilisateur',
    'auth.loggingIn': 'Connexion en cours...',
    'auth.loginButton': 'Se Connecter',
    'auth.orContinueWith': 'Continuer avec',
    'auth.signInWithGoogle': 'Se connecter avec Google',
    'auth.noAccountQuestion': 'Pas connecté ?',
    'auth.registerNow': 'Inscrivez-vous dès maintenant',
    'auth.agreementPrefix': 'En continuant, vous acceptez',
    'auth.termsOfUse': 'les conditions d\'utilisation',
    'auth.andOur': 'et notre',
    'auth.privacyPolicy': 'politique de confidentialité',
    'auth.agreementSuffix': '. Merci de les lire attentivement.',
    'auth.createAccount': 'Créer un compte',
    'auth.registerDescription': 'Créez votre compte pour commencer',
    'auth.fullName': 'Nom complet',
    'auth.yourNamePlaceholder': 'Votre nom complet',
    'auth.accountType': 'Type de compte',
    'auth.role.customer': 'Client',
    'auth.role.supplier': 'Fournisseur',
    'auth.role.sourcer': 'Sourceur',
    'auth.role.admin': 'Administrateur',
    'auth.role.customerTitle': 'Client',
    'auth.role.supplierTitle': 'Fournisseur',
    'auth.role.sourcerTitle': 'Sourceur',
    'auth.role.adminTitle': 'Administrateur',
    'auth.role.customerDescription': 'Achetez des produits auprès de fournisseurs',
    'auth.role.supplierDescription': 'Vendez vos produits à des clients',
    'auth.role.sourcerDescription': 'Aidez les clients à trouver les meilleurs fournisseurs',
    'auth.role.adminDescription': 'Gérez la plateforme et les utilisateurs',
    'auth.nameRequired': 'Le nom est requis',
    'auth.emailRequired': 'L\'email est requis',
    'auth.passwordMinLength': 'Le mot de passe doit contenir au moins 6 caractères',
    'auth.passwordsDoNotMatch': 'Les mots de passe ne correspondent pas',
    'auth.registrationError': 'Erreur lors de l\'inscription',
    'auth.createMyAccount': 'Créer mon compte',
    'auth.creatingAccount': 'Création en cours...',
    'auth.hasAccountQuestion': 'Déjà un compte ?',
    'subscription.title': 'Nos formules d\'abonnement',
    'subscription.upgrade': 'Mettre à niveau',
    'subscription.current': 'Votre formule actuelle',
    'subscription.premium': 'Premium',
    'subscription.free': 'Gratuit',
    'dashboard.title': 'Tableau de bord',
    'dashboard.favorites': 'Favoris',
    'dashboard.messages': 'Messages',
    'dashboard.history': 'Historique',
    'dashboard.subscription': 'Abonnement',
    'dashboard.noFavorites': 'Aucun produit favori pour le moment.',
    'dashboard.browseProducts': 'Parcourir les produits',
    'dashboard.noMessages': 'Aucun message pour le moment.',
    'dashboard.contactSupplier': 'Contacter un fournisseur',
    'dashboard.noHistory': 'Aucun historique de navigation pour le moment.',
    'home.title': 'La principale plateforme B2B d\'import-export avec la Chine',
    'home.subtitle': 'Connectez-vous directement avec des milliers de fournisseurs vérifiés',
    'home.stats.products': 'de produits',
    'home.stats.suppliers': 'fournisseurs',
    'home.stats.productCategories': 'catégories de produits',
    'home.stats.countriesAndRegions': 'pays et régions',
    'home.searchButton': 'Rechercher',
    'home.searchPlaceholder': 'Rechercher vos produits',
    'home.popularSearches': 'Recherches populaires:',
    'home.masques': 'masques',
    'home.batteries': 'batteries',
    'home.led': 'LED',
    'home.howItWorks.title': 'Comment ça marche ?',
    'home.howItWorks.subtitle': 'Trouvez votre usine en Chine en seulement 3 étapes',
    'home.howItWorks.step1.title': '1. Recherchez vos produits',
    'home.howItWorks.step1.description': 'Utilisez nos filtres avancés pour trouver exactement ce que vous cherchez parmi des milliers de produits.',
    'home.howItWorks.step2.title': '2. Contactez les fournisseurs',
    'home.howItWorks.step2.description': 'Entrez en contact direct avec des usines chinoises vérifiées et fiables, sans intermédiaire.',
    'home.howItWorks.step3.title': '3. Commandez et importez',
    'home.howItWorks.step3.description': 'Négociez vos prix, obtenez des échantillons et lancez votre commande en toute sérénité.',
    'home.features.title': 'Pourquoi nous choisir ?',
    'home.features.suppliers.title': 'Fournisseurs vérifiés',
    'home.features.suppliers.description': 'Tous nos fournisseurs sont vérifiés et certifiés pour garantir qualité et fiabilité.',
    'home.features.translation.title': 'Traduction automatique',
    'home.features.translation.description': 'Communiquez dans votre langue, nous traduisons pour vous vers le chinois et vice versa.',
    'home.features.pricing.title': 'Tarifs transparents',
    'home.features.pricing.description': 'Pas de commission cachée, uniquement un abonnement mensuel avec plusieurs options.',
    'home.cta.title': 'Prêt à développer votre business ?',
    'home.cta.subtitle': 'Commencez à importer depuis la Chine dès aujourd\'hui.',
    'home.cta.button': 'Créer un compte',
    'footer.tagline': 'Trouvez votre usine en Chine en 3 clics',
    'footer.supplierPortal': 'Espace Fournisseur',
    'footer.sourcerPortal': 'Espace Sourceur',
    'footer.copyright': 'Chine ton usine. Tous droits réservés.',
    'footer.privacy': 'Politique de confidentialité',
    'footer.terms': 'Conditions d\'utilisation',
    'supplier.dashboard.title': 'Tableau de bord fournisseur',
    'supplier.dashboard.overview': 'Vue d\'ensemble de votre activité',
    'supplier.products.title': 'Gestion des produits',
    'supplier.products.manage': 'Gérez votre catalogue de produits',
    'supplier.products.add': 'Ajouter un produit',
    'supplier.products.search': 'Rechercher un produit',
    'supplier.products.status': 'Tous les statuts',
    'supplier.products.active': 'Actif',
    'supplier.products.inactive': 'Inactif',
    'supplier.products.outOfStock': 'En rupture',
    'categories.title': 'Explorez nos catégories',
    'categories.subtitle': 'Des millions d\'offres adaptées aux besoins de votre entreprise',
    'categories.viewAll': 'Voir toutes les catégories',
    'optimize.title': 'Optimisez vos commandes en un seul et même endroit',
    'optimize.search.title': 'Recherchez des offres',
    'optimize.search.description': 'Recherchez et filtrez parmi des millions d\'offres de produits et de fournisseurs et trouvez les offres qui correspondent à votre entreprise.',
    'optimize.identify.title': 'Identifiez le bon fournisseur',
    'optimize.identify.description': 'Comparez les fournisseurs, vérifiez leurs certifications et évaluez leur fiabilité grâce aux avis clients.',
    'optimize.pay.title': 'Payez en toute confiance',
    'optimize.pay.description': 'Bénéficiez de paiements sécurisés et d\'une protection de vos transactions avec notre système de garantie.',
    'optimize.manage.title': 'Gérez facilement',
    'optimize.manage.description': 'Suivez vos commandes, communiquez avec vos fournisseurs et gérez vos documents depuis votre tableau de bord.',
    'sourcerDashboard.title': 'Tableau de bord de l\'Influenceur',
    'sourcerDashboard.home.title': 'Aperçu de votre activité',
    'sourcerDashboard.home.clicks': 'Total de Clics',
    'sourcerDashboard.home.orders': 'Commandes Générées',
    'sourcerDashboard.home.commissions': 'Commissions Totales',
    'sourcerDashboard.products.title': 'Produits à Recommander et à Trouver',
    'sourcerDashboard.products.shareLink': 'Partager le lien',
    'sourcerDashboard.commissions.title': 'Historique des Commissions',
    'sourcerDashboard.commissions.productName': 'Nom du Produit',
    'sourcerDashboard.commissions.amount': 'Montant',
    'sourcerDashboard.commissions.date': 'Date',
    'sourcerDashboard.inviteLink.title': 'Lien d\'Invitation Sourcer',
    'sourcerDashboard.inviteLink.yourLink': 'Votre lien d\'invitation unique',
    'sourcerDashboard.inviteLink.sharePrompt': 'Partagez ce lien avec de nouveaux fournisseurs pour gagner des commissions sur leurs ventes.',
    'sourcerDashboard.inviteLink.qrCode': 'Scanner le QR Code',
    'sourcerDashboard.clientRequests.title': 'Demandes Clients',
    'sourcerDashboard.clientRequests.clientName': 'Nom du Client',
    'sourcerDashboard.clientRequests.request': 'Demande',
    'sourcerDashboard.clientRequests.status': 'Statut',
    'sourcerDashboard.clientRequests.noRequests': 'Aucune demande client pour le moment.',
    'sourcerDashboard.stats.title': 'Statistiques',
    'sourcerDashboard.stats.chartPlaceholder': 'Graphique des performances à venir...',
    'sourcerDashboard.rewards.title': 'Vos Récompenses',
    'containers': 'Conteneurs',
    'containers.title': 'Liste des conteneurs',
    'containers.loading': 'Chargement des conteneurs...',
    'containers.error': 'Erreur de chargement',
    'containers.departure': 'Lieu de départ',
    'containers.arrival': 'Lieu d\'arrivée',
    'containers.estimatedDeparture': 'Date de départ estimée',
    'containers.status': 'Statut',
    'containers.status.active': 'Actif',
    'containers.status.closed': 'Clôturé',
    'containers.capacity': 'Capacité',
    'containers.closedMessage': 'Ce conteneur est clôturé et n\'est plus réservable.',
    'containers.almostFullMessage': 'Ce conteneur est presque plein, réservez vite !',
    'containers.availableMessage': 'Ce conteneur est disponible pour de nouvelles réservations.',
    'chat.messagePlaceholder': 'Écrivez votre message...',
    'chat.send': 'Envoyer',
    'chat.minimize': 'Réduire',
    'chat.maximize': 'Agrandir',
    'chat.close': 'Fermer',
    'chat.newMessage': 'Nouveau message',
    'chat.messageReceived': 'Message reçu de',
    'order.status.pending': 'En attente',
    'order.status.processing': 'En traitement',
    'order.status.shipped': 'Expédié',
    'order.status.delivered': 'Livré',
    'order.status.cancelled': 'Annulé',
    'order.lastUpdate': 'Dernière mise à jour',
    'order.estimatedDelivery': 'Livraison estimée',
    'order.trackingNumber': 'Numéro de suivi',
    'order.trackOrder': 'Suivre la commande',
    'order.viewDetails': 'Voir les détails',
    'notification.newMessage': 'Nouveau message',
    'notification.orderUpdate': 'Mise à jour de commande',
    'notification.priceAlert': 'Alerte de prix',
    'notification.supplierResponse': 'Réponse du fournisseur',
    'notification.system': 'Notification système',
    'search.filters': 'Filtres',
    'search.filters.price': 'Prix',
    'search.filters.category': 'Catégorie',
    'search.filters.certification': 'Certification',
    'search.filters.moq': 'Quantité minimale',
    'search.filters.location': 'Localisation',
    'search.selectAll': 'Tous',
    'search.clearFilters': 'Effacer les filtres',
    'search.button': 'Rechercher',
    'search.placeholder': 'Rechercher un produit, une catégorie, ou un service...',
    'search.results': 'Résultats de la recherche',
    'search.noResults': 'Aucun résultat trouvé.',
    'comparison.specifications': 'Spécifications',
    'comparison.addProduct': 'Ajouter un produit',
    'comparison.removeProduct': 'Retirer le produit',
    'comparison.maxProducts': 'Vous pouvez comparer jusqu\'à 3 produits',
    'comparison.noProducts': 'Aucun produit à comparer',
    'comparison.differences': 'Différences',
    'comparison.similarities': 'Similitudes',
    'comparison.export': 'Exporter la comparaison',
    'comparison.print': 'Imprimer la comparaison',
    'test.key': 'Test Key',
    'search.suggestions.category': 'Catégorie',
    'search.suggestions.popularSearch': 'Recherche populaire',
    'search.suggestions.pressEnter': 'Appuyez sur Entrée pour rechercher',
    // Additional supplier products keys
    'supplier.products.searchPlaceholder': 'Rechercher un produit...',
    'supplier.products.allCategories': 'Toutes les catégories',
    'supplier.products.resetDefault': 'Restaurer par défaut',
    'supplier.products.totalProducts': 'Total Produits',
    'supplier.products.viewsThisMonth': 'Vues ce mois',
    'supplier.products.averageRating': 'Note moyenne',
    'supplier.products.inStock': 'En stock',
    'supplier.products.productsList': 'Produits',
    'supplier.products.name': 'Nom',
    'supplier.products.factoryPrice': 'Prix d\'usine',
    'supplier.products.actions': 'Actions',
    'supplier.products.edit': 'Modifier',
    'supplier.products.delete': 'Supprimer',
    'supplier.products.noProducts': 'Aucun produit trouvé',
    'supplier.products.addFirstProduct': 'Ajoutez votre premier produit pour commencer',
    'supplier.products.deleteConfirm': 'Êtes-vous sûr de vouloir supprimer ce produit ?',
    'supplier.products.deleteSuccess': 'Produit supprimé avec succès',
    'supplier.products.addSuccess': 'Produit ajouté avec succès',
    'supplier.products.updateSuccess': 'Produit mis à jour avec succès',
    'supplier.products.resetSuccess': 'Liste des produits restaurée par défaut',
    // Product Modal
    'product.modal.addTitle': 'Ajouter un produit',
    'product.modal.editTitle': 'Modifier le produit',
    'product.modal.productName': 'Nom du produit',
    'product.modal.productNamePlaceholder': 'Entrez le nom du produit',
    'product.modal.productId': 'ID Produit',
    'product.modal.productIdPlaceholder': 'Entrez l\'ID du produit',
    'product.modal.selectCategory': 'Sélectionnez une catégorie',
    'product.modal.factoryPrice': 'Prix d\'usine (CNY)',
    'product.modal.factoryPricePlaceholder': 'Entrez le prix d\'usine',
    'product.modal.unitPrice': 'Prix unitaire (CNY)',
    'product.modal.unitPricePlaceholder': 'Entrez le prix unitaire',
    'product.modal.moqPlaceholder': 'Entrez la MOQ',
    'product.modal.descriptionPlaceholder': 'Décrivez votre produit...',
    'product.modal.productImages': 'Images du produit',
    'product.modal.ceCertified': 'Certifié CE',
    'product.modal.saving': 'Enregistrement...',
    'product.modal.requiredFields': 'Veuillez remplir tous les champs requis',
    'product.modal.invalidPrice': 'Veuillez entrer un prix valide',
    'product.modal.invalidMoq': 'Veuillez entrer une quantité valide',
    // Image Upload
    'imageUpload.dragDrop': 'Glissez et déposez vos images ici, ou',
    'imageUpload.browse': 'parcourir',
    'imageUpload.supportedFormats': 'Formats supportés: JPG, PNG, GIF (max 5MB)',
    'imageUpload.removeImage': 'Supprimer l\'image',
    'imageUpload.maxFiles': 'Maximum 5 images',
    'imageUpload.fileTooLarge': 'Fichier trop volumineux (max 5MB)',
    'imageUpload.invalidFormat': 'Format de fichier non supporté',
    'imageUpload.uploadError': 'Erreur lors de l\'upload',
    'imageUpload.uploading': 'Upload en cours...',
    'imageUpload.uploadSuccess': 'Image uploadée avec succès',
    // Dashboard additional keys
    'supplier.dashboard.products': 'Produits',
    'supplier.dashboard.orders': 'Commandes',
    'supplier.dashboard.analytics': 'Analyses',
    'supplier.dashboard.documents': 'Documents',
    'supplier.dashboard.profile': 'Profil',
    'supplier.dashboard.settings': 'Paramètres',
    'supplier.dashboard.welcome': 'Bienvenue sur votre tableau de bord',
    'supplier.dashboard.quickActions': 'Actions rapides',
    'supplier.dashboard.recentActivity': 'Activité récente',
    'supplier.dashboard.stats': 'Statistiques',
    'supplier.dashboard.totalProducts': 'Produits totaux',
    'supplier.dashboard.viewAllProducts': 'Voir tous les produits',
    'supplier.dashboard.activeOrders': 'Commandes actives',
    'supplier.dashboard.manageOrders': 'Gérer les commandes',
    'supplier.dashboard.monthlyRevenue': 'Revenu mensuel',
    'supplier.dashboard.viewAnalytics': 'Voir les analyses',
    'supplier.dashboard.customerSatisfaction': 'Satisfaction client',
    'supplier.dashboard.viewReviews': 'Voir les avis',
    'supplier.dashboard.importantAlerts': 'Alertes importantes',
    'supplier.dashboard.addProduct': 'Ajouter un produit',
    'supplier.dashboard.addProductDesc': 'Créer une nouvelle fiche produit',
    'supplier.dashboard.messages': 'Messages',
    'supplier.dashboard.newMessages': '{count} nouveaux messages',
    'supplier.dashboard.threeNewMessages': '3 nouveaux messages',
    'supplier.dashboard.manageDocuments': 'Gérer vos documents',
    'supplier.dashboard.salesPerformance': 'Performance des ventes',
    'supplier.dashboard.revenue': 'Chiffre d\'affaires',
    'supplier.dashboard.last30Days': '30 derniers jours',
    'supplier.dashboard.month': 'Mois',
    'supplier.dashboard.year': 'Année',
    'supplier.dashboard.salesChart': 'Graphique des ventes',
    'supplier.dashboard.dataWillDisplay': 'Les données seront affichées ici',
    // Navigation
    'nav.back': 'Retour',
    'nav.profile': 'Profil',
    'nav.language': 'Langue',
    'nav.currency': 'Devise',
    // Common
    'common.loading': 'Chargement...',
    'common.error': 'Erreur',
    'common.success': 'Succès',
    'common.confirm': 'Confirmer',
    'common.save': 'Enregistrer',
    'common.delete': 'Supprimer',
    'common.edit': 'Modifier',
    'common.add': 'Ajouter',
    'common.search': 'Rechercher',
    'common.filter': 'Filtrer',
    'common.reset': 'Réinitialiser',
    'common.close': 'Fermer',
    'common.view': 'Voir',
    'common.download': 'Télécharger',
    'common.upload': 'Uploader',
    'common.yes': 'Oui',
    'common.no': 'Non',
    'common.required': 'Requis',
    // Supplier Sidebar
    'supplier.sidebar.dashboard': 'Tableau de bord',
    'supplier.sidebar.products': 'Mes Produits',
    'supplier.sidebar.orders': 'Commandes',
    'supplier.sidebar.customers': 'Clients',
    'supplier.sidebar.shipments': 'Expéditions',
    'supplier.sidebar.messages': 'Messages',
    'supplier.sidebar.documents': 'Documents',
    'supplier.sidebar.reviews': 'Avis',
    'supplier.sidebar.analytics': 'Statistiques',
    'supplier.sidebar.settings': 'Paramètres',
    'supplier.sidebar.title': 'Espace Fournisseur',
    // Orders Page
    'supplier.orders.title': 'Gestion des commandes',
    'supplier.orders.overview': 'Gérez vos commandes et suivez les paiements',
    'supplier.orders.searchPlaceholder': 'Rechercher une commande...',
    'supplier.orders.allStatuses': 'Tous les statuts',
    'supplier.orders.new': 'Nouvelle',
    'supplier.orders.confirmed': 'Confirmée',
    'supplier.orders.shipped': 'Expédiée',
    'supplier.orders.delivered': 'Livrée',
    'supplier.orders.cancelled': 'Annulée',
    'supplier.orders.totalOrders': 'Total Commandes',
    'supplier.orders.pendingAmount': 'Montant en attente',
    'supplier.orders.completedAmount': 'Montant complété',
    'supplier.orders.orderId': 'ID Commande',
    'supplier.orders.customer': 'Client',
    'supplier.orders.amount': 'Montant',
    'supplier.orders.status': 'Statut',
    'supplier.orders.date': 'Date',
    'supplier.orders.actions': 'Actions',
    'supplier.orders.view': 'Voir',
    'supplier.orders.process': 'Traiter',
    'supplier.orders.ship': 'Expédier',
    'supplier.orders.noOrders': 'Aucune commande trouvée',
    'supplier.orders.addFirstOrder': 'Votre première commande apparaîtra ici',
    // Customers Page
    'supplier.customers.title': 'Gestion des clients',
    'supplier.customers.overview': 'Gérez vos relations clients',
    'supplier.customers.searchPlaceholder': 'Rechercher un client...',
    'supplier.customers.allTypes': 'Tous les types',
    'supplier.customers.premium': 'Premium',
    'supplier.customers.regular': 'Régulier',
    'supplier.customers.new': 'Nouveau',
    'supplier.customers.totalCustomers': 'Total Clients',
    'supplier.customers.activeCustomers': 'Clients Actifs',
    'supplier.customers.newThisMonth': 'Nouveaux ce mois',
    'supplier.customers.name': 'Nom',
    'supplier.customers.email': 'Email',
    'supplier.customers.orders': 'Commandes',
    'supplier.customers.totalSpent': 'Total dépensé',
    'supplier.customers.lastOrder': 'Dernière commande',
    'supplier.customers.contact': 'Contacter',
    'supplier.customers.noCustomers': 'Aucun client trouvé',
    'supplier.customers.addFirstCustomer': 'Vos clients apparaîtront ici',
    // Additional customer page keys
    'supplier.customers.pageTitle': 'Mes Clients',
    'supplier.customers.pageDescription': 'Gérez vos relations clients et suivez leur activité',
    'supplier.customers.backToDashboard': 'Retour au tableau de bord',
    'supplier.customers.totalOrders': 'Commandes totales',
    'supplier.customers.revenue': 'Chiffre d\'affaires',
    'supplier.customers.searchByNameEmailCompany': 'Rechercher par nom, email ou entreprise...',
    'supplier.customers.allStatuses': 'Tous les statuts',
    'supplier.customers.active': 'Actif',
    'supplier.customers.inactive': 'Inactif',
    'supplier.customers.loading': 'Chargement...',
    'supplier.customers.errorLoading': 'Erreur lors du chargement des clients',
    'supplier.customers.customerSince': 'Client depuis',
    'supplier.customers.lastOrderDate': 'Dernière commande:',
    'supplier.customers.view': 'Voir',
    'supplier.customers.message': 'Message',
    // Shipments Page
    'supplier.shipments.title': 'Gestion des expéditions',
    'supplier.shipments.overview': 'Suivez vos expéditions et livraisons',
    'supplier.shipments.searchPlaceholder': 'Rechercher une expédition...',
    'supplier.shipments.allStatuses': 'Tous les statuts',
    'supplier.shipments.preparing': 'En préparation',
    'supplier.shipments.inTransit': 'En transit',
    'supplier.shipments.delivered': 'Livré',
    'supplier.shipments.totalShipments': 'Total Expéditions',
    'supplier.shipments.inTransitCount': 'En transit',
    'supplier.shipments.deliveredToday': 'Livrées aujourd\'hui',
    'supplier.shipments.shipmentId': 'ID Expédition',
    'supplier.shipments.destination': 'Destination',
    'supplier.shipments.tracking': 'Suivi',
    'supplier.shipments.estimatedDelivery': 'Livraison estimée',
    'supplier.shipments.track': 'Suivre',
    'supplier.shipments.noShipments': 'Aucune expédition trouvée',
    'supplier.shipments.addFirstShipment': 'Vos expéditions apparaîtront ici',
    // Messages Page
    'supplier.messages.title': 'Messages',
    'supplier.messages.overview': 'Communiquez avec vos clients',
    'supplier.messages.searchPlaceholder': 'Rechercher un message...',
    'supplier.messages.allTypes': 'Tous les types',
    'supplier.messages.inquiry': 'Demande',
    'supplier.messages.order': 'Commande',
    'supplier.messages.support': 'Support',
    'supplier.messages.totalMessages': 'Total Messages',
    'supplier.messages.unreadMessages': 'Messages non lus',
    'supplier.messages.respondedToday': 'Répondus aujourd\'hui',
    'supplier.messages.from': 'De',
    'supplier.messages.subject': 'Sujet',
    'supplier.messages.type': 'Type',
    'supplier.messages.reply': 'Répondre',
    'supplier.messages.noMessages': 'Aucun message trouvé',
    'supplier.messages.addFirstMessage': 'Vos messages apparaîtront ici',
    // Documents Page
    'supplier.documents.title': 'Documents',
    'supplier.documents.overview': 'Gérez vos documents et fichiers',
    'supplier.documents.searchPlaceholder': 'Rechercher un document...',
    'supplier.documents.allTypes': 'Tous les types',
    'supplier.documents.contract': 'Contrat',
    'supplier.documents.invoice': 'Facture',
    'supplier.documents.certificate': 'Certificat',
    'supplier.documents.manual': 'Manuel',
    'supplier.documents.other': 'Autre',
    'supplier.documents.allStatuses': 'Tous les statuts',
    'supplier.documents.approved': 'Approuvé',
    'supplier.documents.pending': 'En attente',
    'supplier.documents.rejected': 'Rejeté',
    'supplier.documents.uploadDocument': 'Télécharger un document',
    'supplier.documents.totalDocuments': 'Total Documents',
    'supplier.documents.downloads': 'Téléchargements',
    'supplier.documents.document': 'Document',
    'supplier.documents.size': 'Taille',
    'supplier.documents.uploadDate': 'Date d\'upload',
    'supplier.documents.downloadCount': 'Téléchargements',
    'supplier.documents.preview': 'Prévisualiser',
    'supplier.documents.download': 'Télécharger',
    'supplier.documents.noDocuments': 'Aucun document trouvé',
    'supplier.documents.addFirstDocument': 'Téléchargez votre premier document',
    // Reviews Page
    'supplier.reviews.title': 'Avis clients',
    'supplier.reviews.overview': 'Consultez et gérez les avis de vos clients',
    'supplier.reviews.searchPlaceholder': 'Rechercher un avis...',
    'supplier.reviews.allRatings': 'Toutes les notes',
    'supplier.reviews.5stars': '5 étoiles',
    'supplier.reviews.4stars': '4 étoiles',
    'supplier.reviews.3stars': '3 étoiles',
    'supplier.reviews.2stars': '2 étoiles',
    'supplier.reviews.1star': '1 étoile',
    'supplier.reviews.allProducts': 'Tous les produits',
    'supplier.reviews.averageRating': 'Note moyenne',
    'supplier.reviews.totalReviews': 'Total Avis',
    'supplier.reviews.responseRate': 'Taux de réponse',
    'supplier.reviews.customer': 'Client',
    'supplier.reviews.product': 'Produit',
    'supplier.reviews.rating': 'Note',
    'supplier.reviews.comment': 'Commentaire',
    'supplier.reviews.respond': 'Répondre',
    'supplier.reviews.noReviews': 'Aucun avis trouvé',
    'supplier.reviews.addFirstReview': 'Vos avis clients apparaîtront ici',
    // Analytics Page
    'supplier.analytics.title': 'Statistiques',
    'supplier.analytics.overview': 'Analysez vos performances',
    'supplier.analytics.salesOverview': 'Aperçu des ventes',
    'supplier.analytics.revenue': 'Chiffre d\'affaires',
    'supplier.analytics.orders': 'Commandes',
    'supplier.analytics.customers': 'Nouveaux clients',
    'supplier.analytics.products': 'Produits vendus',
    'supplier.analytics.monthlyRevenue': 'Chiffre d\'affaires mensuel',
    'supplier.analytics.last30days': '30 derniers jours',
    'supplier.analytics.topProducts': 'Produits les plus vendus',
    'supplier.analytics.customerSatisfaction': 'Satisfaction client',
    'supplier.analytics.month': 'Mois',
    'supplier.analytics.year': 'Année',
    // Settings Page
    'supplier.settings.title': 'Paramètres',
    'supplier.settings.overview': 'Gérez vos paramètres de compte',
    'supplier.settings.profile': 'Profil',
    'supplier.settings.company': 'Entreprise',
    'supplier.settings.notifications': 'Notifications',
    'supplier.settings.security': 'Sécurité',
    'supplier.settings.companyName': 'Nom de l\'entreprise',
    'supplier.settings.contactEmail': 'Email de contact',
    'supplier.settings.phone': 'Téléphone',
    'supplier.settings.address': 'Adresse',
    'supplier.settings.description': 'Description',
    'supplier.settings.website': 'Site web',
    'supplier.settings.emailNotifications': 'Notifications par email',
    'supplier.settings.pushNotifications': 'Notifications push',
    'supplier.settings.orderNotifications': 'Notifications de commandes',
    'supplier.settings.messageNotifications': 'Notifications de messages',
    'supplier.settings.changePassword': 'Changer le mot de passe',
    'supplier.settings.currentPassword': 'Mot de passe actuel',
    'supplier.settings.newPassword': 'Nouveau mot de passe',
    'supplier.settings.confirmPassword': 'Confirmer le mot de passe',
    'supplier.settings.saveChanges': 'Enregistrer les modifications',
    'supplier.settings.cancel': 'Annuler',
    'common.optional': 'Optionnel',
  },
  'en': {
    // Additional supplier products keys
    // Product Modal
    // Image Upload
    // Dashboard additional keys
    // Navigation
    // Common
    // Supplier Sidebar
    // Orders Page
    // Customers Page
    // Shipments Page
    // Messages Page
    // Documents Page
    // Reviews Page
    // Analytics Page
    // Settings Page
  },
  'es': {
    'preorderContainer.title': 'Reserva anticipada de espacio en contenedor',
    'preorderContainer.description': 'Por favor, ingrese la cantidad de CBM que desea reservar.',
    'preorderContainer.capacityNeeded': 'Capacidad requerida (en CBM)',
    'preorderContainer.terms': 'He leído y acepto los',
    'preorderContainer.termsLink': 'términos generales de reserva anticipada',
    'preorderContainer.agreeToTerms': 'Por favor, acepte los términos generales.',
    'preorderContainer.preorderButton': 'Pre-reservar',
    'preorderContainer.cancelButton': 'Cancelar',
    'preorderContainer.successMessage': '¡Su solicitud de reserva anticipada ha sido enviada con éxito!',
    // Supplier Sidebar
    // Dashboard additional keys
    // Navigation
    // Common
  },
  'ar': {
    'auth.loginErrorTitle': 'خطأ في تسجيل الدخول',
    'auth.adminConnectionTitle': 'اتصال المدير',
    'auth.adminConnectionMessage': 'تم التعرف عليك كمدير. لا يلزم تحديد دور.',
    'auth.emptyFields': 'يرجى ملء جميع الحقول.',
    'auth.loginError': 'حدث خطأ أثناء تسجيل الدخول.',
    'auth.googleLoginError': 'حدث خطأ أثناء تسجيل الدخول باستخدام Google.',
    // Supplier Sidebar
    // Dashboard additional keys
    // Navigation
    // Common
  },
  'zh': {
    // Supplier Sidebar
    // Dashboard additional keys
  },
  'pt': {
    // Supplier Sidebar
  },
  'nl': {
    // Supplier Sidebar
  },
};
const LanguageContext = createContext<LanguageContextType | undefined>(undefined);
export const LanguageProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const { user } = useAuth();
  const [language, setLanguageState] = useState<UserLanguage>('fr'); // Default to French
  useEffect(() => {
    let newLang: UserLanguage | undefined;
    if (user && user.language) {
      newLang = user.language;
    } else if (localStorage.getItem('userLanguage')) {
      newLang = localStorage.getItem('userLanguage') as UserLanguage;
    }
    if (newLang && newLang !== language) {
      setLanguageState(newLang);
    }
    // eslint-disable-next-line
  }, [user]);
  const setLanguage = (lang: UserLanguage) => {
    setLanguageState(lang);
    localStorage.setItem('userLanguage', lang);
    if (user?.id) { // Vérifier que user et user.id existent
      userService.updateUser(user.id, { language: lang });
    }
  };
  const t = (key: string): string => {
    const currentTranslations = translations[language];
    if (currentTranslations && currentTranslations[key]) {
      return currentTranslations[key];
    }
    // Fallback to English if translation not found in current language
    const englishTranslations = translations['en'];
    if (englishTranslations && englishTranslations[key]) {
      return englishTranslations[key];
    }
    return key; // Return the key itself if no translation is found
  };
  const languageNames: Record<UserLanguage, string> = {
  };
  return (
    <LanguageContext.Provider value={{ language, setLanguage, t, languageNames }}>
      {children}
    </LanguageContext.Provider>
  );
};
export const useLanguage = () => {
  const context = useContext(LanguageContext);
  if (!context) {
    throw new Error('useLanguage must be used within a LanguageProvider');
  }
  return context;
};