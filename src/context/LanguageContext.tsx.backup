import React, { createContext, useState, useContext, useEffect } from 'react';
import { useAuth } from './AuthContext';

export type UserLanguage = 'fr' | 'en' | 'es' | 'ar' | 'zh' | 'pt' | 'nl';

interface LanguageContextType {
  language: UserLanguage;
  setLanguage: (lang: UserLanguage) => void;
  t: (key: string, params?: Record<string, any>) => string;
  availableLanguages: UserLanguage[];
  getLanguageName: (lang: UserLanguage) => string;
}

const translations = {
  "fr": {
    "home": "Accueil",
    "search": "Rechercher",
    "search.placeholder": "Rechercher des produits...",
    "dashboard": "Tableau de bord",
    "nav.login": "Connexion",
    "logout": "Déconnexion",
    "discover": "Découvrir",

    "notifications.title": "Notifications",
    "notifications.noNotifications": "Aucune notification",
    "notifications.noNotificationsMessage": "Vous n'avez aucune notification pour le moment",
    "notifications.markAllAsRead": "Tout marquer comme lu",
    "notifications.markAsRead": "Marquer comme lu",
    "notifications.refresh": "Actualiser",
    "notifications.filters": "Filtres",
    "notifications.status": "Statut",
    "notifications.type": "Type",
    "notifications.all": "Tous",
    "notifications.unread": "Non lus",
    "notifications.read": "Lus",
    "notifications.allTypes": "Tous les types",
    "notifications.orders": "Commandes",
    "notifications.payments": "Paiements",
    "notifications.shipments": "Expéditions",
    "notifications.system": "Système",
    "notifications.info": "Information",
    "notifications.warnings": "Avertissements",
    "notifications.errors": "Erreurs",
    "notifications.clearFilters": "Effacer",
    "notifications.loading": "Chargement...",
    "notifications.error": "Erreur lors du chargement des notifications",
    "notifications.seeDetails": "Voir les détails",
    "notifications.timeAgo.now": "À l'instant",
    "notifications.timeAgo.minutes": "Il y a {0} min",
    "notifications.timeAgo.hours": "Il y a {0}h",
    "notifications.timeAgo.days": "Il y a {0}j",
    "notifications.priority.urgent": "Urgent",
    "notifications.priority.high": "Élevé",
    "notifications.priority.medium": "Moyen",
    "notifications.priority.low": "Faible",
    "notifications.allLoaded": "Toutes les notifications ont été chargées",
    "notifications.count.singular": "{0} non lu",
    "notifications.count.plural": "{0} non lus",

    "email": "Email",
    "password": "Mot de passe",
    "confirmPassword": "Confirmer le mot de passe",
    "login": "Connexion",
    "register": "Inscription",
    "loginDescription": "Connectez-vous pour accéder à votre compte",
    "accountType": "Type de compte",
    "role.customer": "Client",
    "role.supplier": "Fournisseur",
    "role.sourcer": "Sourceur",
    "role.influencer": "Influenceur",
    "emailPlaceholder": "votre@email.com",
    "passwordPlaceholder": "••••••••",
    "rememberMe": "Se souvenir de moi",
    "forgotPassword": "Mot de passe oublié ?",
    "loginButton": "Se connecter",
    "loggingIn": "Connexion...",
    "createAccount": "Créer un compte",
    "registerDescription": "Créez votre compte pour commencer",
    "fullName": "Nom complet",
    "yourNamePlaceholder": "Votre nom complet",
    "nameRequired": "Le nom est requis",
    "emailRequired": "L'email est requis",
    "passwordMinLength": "Le mot de passe doit contenir au moins 6 caractères",
    "passwordsDoNotMatch": "Les mots de passe ne correspondent pas",
    "registrationError": "Erreur d'inscription",
    "creatingAccount": "Création du compte...",
    "createMyAccount": "Créer mon compte",
    "hasAccountQuestion": "Vous avez déjà un compte ?",
    "role.customerTitle": "Client",
    "role.supplierTitle": "Fournisseur",
    "role.sourcerTitle": "Sourceur",
    "role.customerDescription": "Acheter des produits aux fournisseurs",
    "role.supplierDescription": "Vendre vos produits aux clients",
    "role.sourcerDescription": "Aider les clients à trouver les meilleurs fournisseurs",
    "common.optional": "Optionnel",
    "fashion": "Mode",
    "tech": "Technologie",
    "beauty": "Beauté",
    "sports": "Sport",
    "mainAudience": "Audience principale",
    "mainAudiencePlaceholder": "Pays ou région majoritaire, âge moyen",
    "engagementRate": "Taux d'engagement",
    "engagementRatePlaceholder": "Facultatif, utile pour évaluer l'interaction",
    "shareStatsAgreement": "J'accepte de partager mes statistiques détaillées sur demande",
    "mediaKit": "Kit média",
    "message": "Message",
    "messagePlaceholder": "Présentez-vous brièvement",
    "socialMediaLinks": "Liens vers les réseaux sociaux",
    "socialMediaLinksPlaceholder": "Instagram, TikTok, YouTube, etc.",
    "followerCount": "Nombre de followers",
    "followerCountPlaceholder": "Nombre de followers pour chaque réseau",
    "category": "Catégorie d'influence",

    // Traductions pour les erreurs et UI
    "emptyFields": "Veuillez remplir tous les champs",
    "loginError": "Erreur de connexion",
    "loginErrorTitle": "Erreur de connexion",
    "registerNow": "S'inscrire maintenant",
    "noAccountQuestion": "Pas encore de compte ?",

    // Conditions d'utilisation
    "termsAgreement": "En continuant, vous acceptez nos conditions d'utilisation et notre politique de confidentialité.",
    "termsOfUse": "conditions d'utilisation",
    "privacyPolicy": "politique de confidentialité",
    "welcomeBack": "Bon retour !",
    "joinUs": "Rejoignez-nous",
    "loginSubtitle": "Connectez-vous pour accéder à votre espace et découvrir les dernières opportunités commerciales",
    "registerSubtitle": "Créez votre compte et découvrez toutes les opportunités d'affaires avec la Chine",
    "signIn": "Se connecter",
    "signUp": "S'inscrire",
    "signInSubtitle": "Accédez à votre espace personnel",
    "signUpSubtitle": "Créez votre compte en quelques étapes",
    "googleLoginError": "Erreur de connexion Google",
    "orContinueWith": "Ou continuer avec",
    "signInWithGoogle": "Continuer avec Google",
    "agreementPrefix": "En continuant, vous acceptez nos",
    "agreementSuffix": ".",
    "andOur": "et notre",
    "welcome.back": "Bon retour !",
    "welcome.back.subtitle": "Connectez-vous pour accéder à votre espace et découvrir les dernières opportunités commerciales avec la Chine.",
    "welcome.join": "Rejoignez-nous !",
    "welcome.join.subtitle": "Créez votre compte et découvrez toutes les opportunités d'affaires avec la Chine",
    "registrationErrorTitle": "Erreur d'inscription",
    "search.button": "Rechercher",

    // Réseaux sociaux
    "socialNetworkSelector.title": "Réseaux sociaux",
    "socialNetworkSelector.subtitle": "Sélectionnez vos réseaux sociaux",
    "socialNetworkSelector.modalInfo": "Un formulaire s'ouvrira pour renseigner vos liens",
    "socialNetworks.instagram": "Instagram",
    "socialNetworks.tiktok": "TikTok",
    "socialNetworks.youtube": "YouTube",
    "socialNetworks.twitter": "X (Twitter)",
    "socialNetworks.linkedin": "LinkedIn",
    "socialNetworks.facebook": "Facebook",
    "socialNetworks.twitch": "Twitch",
    "socialMediaModal.title": "Liens de vos profils",
    "socialMediaModal.description": "Veuillez renseigner les liens de vos profils pour chaque réseau social sélectionné :",
    "socialMediaModal.linkFor": "Lien de votre profil",
    "socialMediaModal.urlRequired": "Ce champ est obligatoire",
    "socialMediaModal.invalidUrl": "Veuillez entrer une URL valide",
    "socialMediaModal.invalidDomain": "L'URL doit contenir le bon domaine",
    "socialMediaModal.close": "Fermer",
    "socialMediaModal.cancel": "Annuler",
    "socialMediaModal.save": "Valider",
    "socialMediaValidation.noNetworkSelected": "Veuillez sélectionner au moins un réseau social",
    "socialMediaValidation.noLinksProvided": "Veuillez renseigner les liens de vos profils",

    // HomePage
    "homepage.title": "Chine ton usine",
    "homepage.subtitle": "ÇA VA VOUS",
    "homepage.subtitle.highlight": "PLAIRE",
    "homepage.tagline": "Coup de foudre inévitable.",
    "homepage.search.placeholder": "Recherchez un produit, une marque...",
    "homepage.recommendations.badge": "Recommandé",
    "homepage.recommendations.title": "Produits recommandés pour vous",
    "homepage.recommendations.subtitle": "Découvrez notre sélection personnalisée de produits",
    "homepage.recommendations.viewAll": "Voir tout",

    // Categories
    "homepage.categories.home": "Accueil",
    "homepage.categories.electronics": "Électronique",
    "homepage.categories.fashion": "Mode",
    "homepage.categories.home.category": "Maison",
    "homepage.categories.beauty": "Beauté",
    "homepage.categories.sports": "Sport",
    "homepage.categories.automotive": "Auto",
    "homepage.categories.tools": "Outils",
    "homepage.categories.toys": "Jouets",
    "homepage.categories.books": "Livres",
    "homepage.categories.music": "Musique",
    "homepage.categories.garden": "Jardin",

    // Network section
    "homepage.network.badge": "Réseau global",
    "homepage.network.suppliers": "Plus de 1000 fournisseurs vérifiés",

    // Homepage Cards
    "homepage.cards.technology": "TECHNOLOGIE",
    "homepage.cards.electronics": "ÉLECTRONIQUE",
    "homepage.cards.electronics.description": "Composants & Gadgets",
    "homepage.cards.explore": "Explorer",
    "homepage.cards.fashion.title": "MODE & VÊTEMENTS",
    "homepage.cards.textile": "TEXTILE",
    "homepage.cards.textile.description": "Fabrication Premium",
    "homepage.cards.industrial": "ÉQUIPEMENT INDUSTRIEL",
    "homepage.cards.machinery": "MACHINERIE",
    "homepage.cards.machinery.description": "Performance & Innovation",
    "homepage.cards.decoration": "DÉCORATION & MOBILIER",
    "homepage.cards.home.garden": "MAISON & JARDIN",
    "homepage.cards.home.garden.description": "Design & Confort",
    "homepage.cards.new": "Nouveau",
    "homepage.cards.educational": "ÉDUCATIF & LUDIQUE",
    "homepage.cards.toys.children": "JOUETS & ENFANTS",
    "homepage.cards.toys.description": "Qualité Certifiée",
    "homepage.cards.parts": "PIÈCES & ACCESSOIRES",
    "homepage.cards.auto.moto": "AUTO & MOTO",
    "homepage.cards.auto.description": "Pièces de Qualité",

    // Homepage CTA
    "homepage.cta.title": "ÇA VA VOUS",
    "homepage.cta.highlight": "PLAIRE",
    "homepage.cta.subtitle": "Coup de foudre inévitable.",
    "homepage.cta.button": "Découvrir tous les fournisseurs",

    // Homepage How it works
    "homepage.how.title": "Comment ça marche ?",
    "homepage.how.subtitle": "Trouvez votre usine en Chine en seulement 3 étapes",
    "homepage.how.step1.title": "1. Recherchez vos produits",
    "homepage.how.step1.description": "Utilisez nos filtres avancés pour trouver exactement ce que vous cherchez parmi des millions de produits.",
    "homepage.how.step2.title": "2. Contactez les fournisseurs",
    "homepage.how.step2.description": "Entrez en contact direct avec des usines chinoises vérifiées et fiables, sans intermédiaire.",
    "homepage.how.step3.title": "3. Commandez et importez",
    "homepage.how.step3.description": "Négociez vos prix, obtenez des échantillons et lancez votre commande en toute sérénité.",
    "homepage.how.cta": "Créer un compte",

    // Homepage Discover
    "homepage.discover.title": "DÉCOUVREZ TOUS NOS",
    "homepage.discover.highlight": "FOURNISSEURS",
    "homepage.discover.subtitle": "Des milliers de fournisseurs vérifiés vous attendent.",
    "homepage.discover.button": "Découvrir tous les fournisseurs",

    // Homepage Process
    "homepage.process.title": "Comment ça marche ?",
    "homepage.process.subtitle": "Notre plateforme vous connecte directement avec les meilleurs fournisseurs chinois",
    "homepage.process.step1.title": "1. Explorez",
    "homepage.process.step1.description": "Parcourez notre catalogue de milliers de produits et fournisseurs vérifiés selon vos besoins.",
    "homepage.process.step2.title": "2. Comparez",
    "homepage.process.step2.description": "Évaluez les prix, la qualité, les certifications et les avis pour choisir le meilleur fournisseur.",
    "homepage.process.step3.title": "3. Contactez",
    "homepage.process.step3.description": "Échangez directement avec les fournisseurs pour négocier les prix et demander des échantillons.",
    "homepage.process.step4.title": "4. Commandez",
    "homepage.process.step4.description": "Finalisez votre commande en toute sécurité avec notre système de paiement protégé.",
    "homepage.process.cta": "Commencer maintenant",

    // Homepage Final CTA
    "homepage.final.title": "Prêt à développer votre business ?",
    "homepage.final.subtitle": "Commencez à importer depuis la Chine dès aujourd'hui.",
    "homepage.final.button": "Créer un compte gratuitement",

    // Supplier
    "supplier.sidebar.title": "ChineTonUsine",
    "supplier.sidebar.dashboard": "Tableau de bord",
    "supplier.sidebar.products": "Produits",
    "supplier.sidebar.customers": "Clients",
    "supplier.sidebar.messages": "Messages",
    "supplier.sidebar.documents": "Documents",
    "supplier.sidebar.reviews": "Avis",
    "supplier.sidebar.analytics": "Analyses",
    "supplier.sidebar.settings": "Paramètres",
    "supplier.companyName": "Nom de l'entreprise",
    "supplier.legalRegistrationNumber": "Numéro d'enregistrement légal",
    "supplier.website": "Site web (optionnel)",
    "supplier.productCategory": "Catégorie de produits",
    "supplier.categories.textile": "Textile",
    "supplier.categories.electronics": "Électronique",
    "supplier.categories.food": "Agroalimentaire",
    "supplier.categories.machinery": "Machines",
    "supplier.categories.automotive": "Automobile",
    "supplier.categories.beauty": "Beauté",
    "supplier.categories.homeGarden": "Maison et jardin",
    "supplier.categories.toys": "Jouets",
    "supplier.categories.industrial": "Industriel",
    "supplier.categories.other": "Autre",
    "supplier.monthlyProductionCapacity": "Capacité de production mensuelle",
    "supplier.productionCountryRegion": "Pays et région de production",
    "supplier.certifications": "Certifications (ISO, CE, etc.)",
    "supplier.qualityControlMethods": "Méthodes de contrôle qualité",
    "supplier.presentationVideo": "Vidéo de présentation ou lien YouTube (optionnel)",
    "supplier.companyMessage": "Message de présentation de l'entreprise",
    "supplier.documents": "Documents de l'entreprise (certificats, catalogues, etc.)",
    "supplier.agreeToVerification": "J'accepte que mes informations soient vérifiées",
    "supplier.registration.message": "Vous serez contacté pour finaliser votre inscription fournisseur",
    "supplier.registration.validation": "Votre compte sera validé manuellement par notre équipe",
    "supplier.registration.title": "Information Importante",
    "supplier.registration.submitButton": "Soumettre la demande",
    "sourcer.registration.message": "Vous serez contacté pour finaliser votre inscription sourceur",
    "sourcer.registration.validation": "Votre compte sera validé manuellement par notre équipe",
    "sourcer.registration.title": "Information Importante",
    "sourcer.registration.submitButton": "Soumettre la demande",
    "fileUpload.dragDrop": "Glissez et déposez un fichier ici",
    "fileUpload.orClick": "ou cliquez pour sélectionner",
    "fileUpload.applicationpdf": "PDF",
    "fileUpload.imageall": "Images",
    "fileUpload.remove": "Supprimer",
    "fileUpload.title": "Kit média"
  },
  "en": {
    "home": "Home",
    "search": "Search",
    "search.placeholder": "Search for products...",
    "dashboard": "Dashboard",
    "nav.login": "Login",
    "logout": "Logout",
    "discover": "Discover",

    // Notifications
    "notifications.title": "Notifications",
    "notifications.noNotifications": "No notifications",
    "notifications.noNotificationsMessage": "You have no notifications at the moment",
    "notifications.markAllAsRead": "Mark all as read",
    "notifications.markAsRead": "Mark as read",
    "notifications.refresh": "Refresh",
    "notifications.filters": "Filters",
    "notifications.status": "Status",
    "notifications.type": "Type",
    "notifications.all": "All",
    "notifications.unread": "Unread",
    "notifications.read": "Read",
    "notifications.allTypes": "All types",
    "notifications.orders": "Orders",
    "notifications.payments": "Payments",
    "notifications.shipments": "Shipments",
    "notifications.system": "System",
    "notifications.info": "Information",
    "notifications.warnings": "Warnings",
    "notifications.errors": "Errors",
    "notifications.clearFilters": "Clear",
    "notifications.loading": "Loading...",
    "notifications.error": "Error loading notifications",
    "notifications.seeDetails": "See details",
    "notifications.timeAgo.now": "Just now",
    "notifications.timeAgo.minutes": "{0} min ago",
    "notifications.timeAgo.hours": "{0}h ago",
    "notifications.timeAgo.days": "{0}d ago",
    "notifications.priority.urgent": "Urgent",
    "notifications.priority.high": "High",
    "notifications.priority.medium": "Medium",
    "notifications.priority.low": "Low",
    "notifications.allLoaded": "All notifications have been loaded",
    "notifications.count.singular": "{0} unread",
    "notifications.count.plural": "{0} unread",

    "email": "Email",
    "password": "Password",
    "confirmPassword": "Confirm Password",
    "login": "Login",
    "register": "Register",
    "loginDescription": "Sign in to access your account",
    "accountType": "Account Type",
    "role.customer": "Customer",
    "role.supplier": "Supplier",
    "role.sourcer": "Sourcer",
    "role.influencer": "Influencer",
    "emailPlaceholder": "your@email.com",
    "passwordPlaceholder": "••••••••",
    "rememberMe": "Remember me",
    "forgotPassword": "Forgot password?",
    "loginButton": "Sign in",
    "loggingIn": "Signing in...",
    "createAccount": "Create Account",
    "registerDescription": "Create your account to get started",
    "fullName": "Full Name",
    "yourNamePlaceholder": "Your full name",
    "nameRequired": "Name is required",
    "emailRequired": "Email is required",
    "passwordMinLength": "Password must be at least 6 characters",
    "passwordsDoNotMatch": "Passwords do not match",
    "registrationError": "Registration error",
    "creatingAccount": "Creating account...",
    "createMyAccount": "Create My Account",
    "hasAccountQuestion": "Already have an account?",
    "role.customerTitle": "Customer",
    "role.supplierTitle": "Supplier",
    "role.sourcerTitle": "Sourcer",
    "role.customerDescription": "Buy products from suppliers",
    "role.supplierDescription": "Sell your products to customers",
    "role.sourcerDescription": "Help customers find the best suppliers",
    "common.optional": "Optional",
    "fashion": "Fashion",
    "tech": "Tech",
    "beauty": "Beauty",
    "sports": "Sports",
    "mainAudience": "Main audience",
    "mainAudiencePlaceholder": "Main country or region, average age",
    "engagementRate": "Engagement rate",
    "engagementRatePlaceholder": "Optional, useful for evaluating interaction",
    "shareStatsAgreement": "I agree to share my detailed statistics on request",
    "mediaKit": "Media kit",
    "message": "Message",
    "messagePlaceholder": "Briefly introduce yourself",
    "socialMediaLinks": "Social media links",
    "socialMediaLinksPlaceholder": "Instagram, TikTok, YouTube, etc.",
    "followerCount": "Follower count",
    "followerCountPlaceholder": "Number of followers for each network",
    "category": "Influence category",

    // Traductions pour les erreurs et UI
    "emptyFields": "Please fill in all fields",
    "loginError": "Login error",
    "loginErrorTitle": "Login Error",
    "registerNow": "Register now",
    "noAccountQuestion": "Don't have an account?",

    // Conditions d'utilisation
    "termsAgreement": "By continuing, you accept our terms of use and privacy policy.",
    "termsOfUse": "terms of use",
    "privacyPolicy": "privacy policy",
    "welcomeBack": "Welcome Back!",
    "joinUs": "Join Us",
    "loginSubtitle": "Sign in to access your space and discover the latest business opportunities",
    "registerSubtitle": "Create your account and discover all business opportunities with China",
    "signIn": "Sign In",
    "signUp": "Sign Up",
    "signInSubtitle": "Access your personal space",
    "signUpSubtitle": "Create your account in a few steps",
    "googleLoginError": "Google login error",
    "orContinueWith": "Or continue with",
    "signInWithGoogle": "Continue with Google",
    "agreementPrefix": "By continuing, you accept our",
    "agreementSuffix": ".",
    "andOur": "and our",
    "welcome.back": "Welcome back!",
    "welcome.back.subtitle": "Sign in to access your space and discover the latest business opportunities with China.",
    "welcome.join": "Join us!",
    "welcome.join.subtitle": "Create your account and discover all business opportunities with China",
    "registrationErrorTitle": "Registration Error",
    "search.button": "Search",

    // Réseaux sociaux
    "socialNetworkSelector.title": "Social Networks",
    "socialNetworkSelector.subtitle": "Select your social networks",
    "socialNetworkSelector.modalInfo": "A form will open to enter your links",
    "socialNetworks.instagram": "Instagram",
    "socialNetworks.tiktok": "TikTok",
    "socialNetworks.youtube": "YouTube",
    "socialNetworks.twitter": "X (Twitter)",
    "socialNetworks.linkedin": "LinkedIn",
    "socialNetworks.facebook": "Facebook",
    "socialNetworks.twitch": "Twitch",
    "socialMediaModal.title": "Your Profile Links",
    "socialMediaModal.description": "Please provide the links to your profiles for each selected social network:",
    "socialMediaModal.linkFor": "Link to your profile",
    "socialMediaModal.urlRequired": "This field is required",
    "socialMediaModal.invalidUrl": "Please enter a valid URL",
    "socialMediaModal.invalidDomain": "The URL must contain the correct domain",
    "socialMediaModal.close": "Close",
    "socialMediaModal.cancel": "Cancel",
    "socialMediaModal.save": "Validate",
    "socialMediaValidation.noNetworkSelected": "Please select at least one social network",
    "socialMediaValidation.noLinksProvided": "Please provide the links to your profiles",

    // HomePage
    "homepage.title": "Chine ton usine",
    "homepage.subtitle": "YOU WILL",
    "homepage.subtitle.highlight": "LOVE IT",
    "homepage.tagline": "Love at first sight inevitable.",
    "homepage.search.placeholder": "Search for a product, brand...",
    "homepage.recommendations.badge": "Recommended",
    "homepage.recommendations.title": "Recommended products for you",
    "homepage.recommendations.subtitle": "Discover our personalized selection of products",

    // Categories
    "homepage.categories.home": "Home",
    "homepage.categories.electronics": "Electronics",
    "homepage.categories.fashion": "Fashion",
    "homepage.categories.home.category": "Home",
    "homepage.categories.beauty": "Beauty",
    "homepage.categories.sports": "Sports",
    "homepage.categories.automotive": "Auto",
    "homepage.categories.tools": "Tools",
    "homepage.categories.toys": "Toys",
    "homepage.categories.books": "Books",
    "homepage.categories.music": "Music",
    "homepage.categories.garden": "Garden",

    // Network section
    "homepage.network.badge": "Global network",
    "homepage.network.suppliers": "Over 1000 verified suppliers",

    // Homepage Cards
    "homepage.cards.technology": "TECHNOLOGY",
    "homepage.cards.electronics": "ELECTRONICS",
    "homepage.cards.electronics.description": "Components & Gadgets",
    "homepage.cards.explore": "Explore",
    "homepage.cards.fashion.title": "FASHION & CLOTHING",
    "homepage.cards.textile": "TEXTILE",
    "homepage.cards.textile.description": "Premium Manufacturing",
    "homepage.cards.industrial": "INDUSTRIAL EQUIPMENT",
    "homepage.cards.machinery": "MACHINERY",
    "homepage.cards.machinery.description": "Performance & Innovation",
    "homepage.cards.decoration": "DECORATION & FURNITURE",
    "homepage.cards.home.garden": "HOME & GARDEN",
    "homepage.cards.home.garden.description": "Design & Comfort",
    "homepage.cards.new": "New",
    "homepage.cards.educational": "EDUCATIONAL & PLAYFUL",
    "homepage.cards.toys.children": "TOYS & CHILDREN",
    "homepage.cards.toys.description": "Certified Quality",
    "homepage.cards.parts": "PARTS & ACCESSORIES",
    "homepage.cards.auto.moto": "AUTO & MOTO",
    "homepage.cards.auto.description": "Quality Parts",

    // Homepage CTA
    "homepage.cta.title": "YOU WILL",
    "homepage.cta.highlight": "LOVE IT",
    "homepage.cta.subtitle": "Love at first sight inevitable.",
    "homepage.cta.button": "Discover all suppliers",

    // Homepage How it works
    "homepage.how.title": "How does it work?",
    "homepage.how.subtitle": "Find your factory in China in just 3 steps",
    "homepage.how.step1.title": "1. Search your products",
    "homepage.how.step1.description": "Use our advanced filters to find exactly what you are looking for among millions of products.",
    "homepage.how.step2.title": "2. Contact suppliers",
    "homepage.how.step2.description": "Get in direct contact with verified and reliable Chinese factories, without intermediaries.",
    "homepage.how.step3.title": "3. Order and import",
    "homepage.how.step3.description": "Negotiate your prices, get samples and launch your order with peace of mind.",
    "homepage.how.cta": "Create an account",

    // Homepage Discover
    "homepage.discover.title": "DISCOVER ALL OUR",
    "homepage.discover.highlight": "SUPPLIERS",
    "homepage.discover.subtitle": "Thousands of verified suppliers are waiting for you.",
    "homepage.discover.button": "Discover all suppliers",

    // Homepage Process
    "homepage.process.title": "How does it work?",
    "homepage.process.subtitle": "Our platform connects you directly with the best Chinese suppliers",
    "homepage.process.step1.title": "1. Explore",
    "homepage.process.step1.description": "Browse our catalog of thousands of verified products and suppliers according to your needs.",
    "homepage.process.step2.title": "2. Compare",
    "homepage.process.step2.description": "Evaluate prices, quality, certifications and reviews to choose the best supplier.",
    "homepage.process.step3.title": "3. Contact",
    "homepage.process.step3.description": "Exchange directly with suppliers to negotiate prices and request samples.",
    "homepage.process.step4.title": "4. Order",
    "homepage.process.step4.description": "Finalize your order securely with our protected payment system.",
    "homepage.process.cta": "Start now",

    // Homepage Final CTA
    "homepage.final.title": "Ready to grow your business?",
    "homepage.final.subtitle": "Start importing from China today.",
    "homepage.final.button": "Create a free account",

    // Supplier
    "supplier.sidebar.title": "ChineTonUsine",
    "supplier.sidebar.dashboard": "Dashboard",
    "supplier.sidebar.products": "Products",
    "supplier.sidebar.customers": "Customers",
    "supplier.sidebar.messages": "Messages",
    "supplier.sidebar.documents": "Documents",
    "supplier.sidebar.reviews": "Reviews",
    "supplier.sidebar.analytics": "Analytics",
    "supplier.sidebar.settings": "Settings",
    "supplier.companyName": "Company name",
    "supplier.legalRegistrationNumber": "Legal registration number",
    "supplier.website": "Website (optional)",
    "supplier.productCategory": "Product category",
    "supplier.categories.textile": "Textile",
    "supplier.categories.electronics": "Electronics",
    "supplier.categories.food": "Food & Agriculture",
    "supplier.categories.machinery": "Machinery",
    "supplier.categories.automotive": "Automotive",
    "supplier.categories.beauty": "Beauty",
    "supplier.categories.homeGarden": "Home & Garden",
    "supplier.categories.toys": "Toys",
    "supplier.categories.industrial": "Industrial",
    "supplier.categories.other": "Other",
    "supplier.monthlyProductionCapacity": "Monthly production capacity",
    "supplier.productionCountryRegion": "Production country and region",
    "supplier.certifications": "Certifications (ISO, CE, etc.)",
    "supplier.qualityControlMethods": "Quality control methods",
    "supplier.presentationVideo": "Presentation video or YouTube link (optional)",
    "supplier.companyMessage": "Company presentation message",
    "supplier.documents": "Company documents (certificates, catalogs, etc.)",
    "supplier.agreeToVerification": "I agree to have my information verified",
    "supplier.registration.message": "You will be contacted to finalize your supplier registration",
    "supplier.registration.validation": "Your account will be validated manually by our team",
    "supplier.registration.title": "Important Information",
    "supplier.registration.submitButton": "Submit Request",
    "sourcer.registration.message": "You will be contacted to finalize your sourcer registration",
    "sourcer.registration.validation": "Your account will be validated manually by our team",
    "sourcer.registration.title": "Important Information",
    "sourcer.registration.submitButton": "Submit Request",
    "fileUpload.dragDrop": "Drag and drop a file here",
    "fileUpload.orClick": "or click to select",
    "fileUpload.applicationpdf": "PDF",
    "fileUpload.imageall": "Images",
    "fileUpload.remove": "Remove",
    "fileUpload.title": "Media Kit"
  },
  "es": {
    "home": "Inicio",
    "search": "Buscar",
    "search.placeholder": "Buscar productos...",
    "dashboard": "Panel",
    "nav.login": "Acceso",
    "logout": "Cerrar sesión",
    "discover": "Descubrir",
    "email": "Correo electrónico",
    "password": "Contraseña",
    "confirmPassword": "Confirmar contraseña",
    "login": "Acceso",
    "register": "Registro",
    "loginDescription": "Inicia sesión para acceder a tu cuenta",
    "accountType": "Tipo de cuenta",
    "role.customer": "Cliente",
    "role.supplier": "Proveedor",
    "role.sourcer": "Sourcer",
    "role.influencer": "Influencer",
    "emailPlaceholder": "tu@email.com",
    "passwordPlaceholder": "••••••••",
    "rememberMe": "Recordarme",
    "forgotPassword": "¿Olvidaste la contraseña?",
    "loginButton": "Iniciar sesión",
    "loggingIn": "Iniciando sesión...",
    "createAccount": "Crear cuenta",
    "registerDescription": "Crea tu cuenta para comenzar",
    "fullName": "Nombre completo",
    "yourNamePlaceholder": "Tu nombre completo",
    "nameRequired": "El nombre es obligatorio",
    "emailRequired": "El email es obligatorio",
    "passwordMinLength": "La contraseña debe tener al menos 6 caracteres",
    "passwordsDoNotMatch": "Las contraseñas no coinciden",
    "registrationError": "Error de registro",
    "creatingAccount": "Creando cuenta...",
    "createMyAccount": "Crear mi cuenta",
    "hasAccountQuestion": "¿Ya tienes una cuenta?",
    "role.customerTitle": "Cliente",
    "role.supplierTitle": "Proveedor",
    "role.sourcerTitle": "Sourcer",
    "role.customerDescription": "Comprar productos a proveedores",
    "role.supplierDescription": "Vender tus productos a clientes",
    "role.sourcerDescription": "Ayudar a los clientes a encontrar los mejores proveedores",
    "andOur": "y nuestra"
  },
  "ar": {
    "home": "الرئيسية",
    "search": "بحث",
    "search.placeholder": "البحث عن المنتجات...",
    "dashboard": "لوحة القيادة",
    "nav.login": "تسجيل الدخول",
    "logout": "تسجيل الخروج",
    "discover": "اكتشف",
    "email": "البريد الإلكتروني",
    "password": "كلمة المرور",
    "confirmPassword": "تأكيد كلمة المرور",
    "login": "تسجيل الدخول",
    "register": "التسجيل",
    "loginDescription": "سجل الدخول للوصول إلى حسابك",
    "accountType": "نوع الحساب",
    "role.customer": "عميل",
    "role.supplier": "مورد",
    "role.sourcer": "باحث",
    "role.influencer": "مؤثر",
    "emailPlaceholder": "بريدك@الإلكتروني.com",
    "passwordPlaceholder": "••••••••",
    "rememberMe": "تذكرني",
    "forgotPassword": "نسيت كلمة المرور؟",
    "loginButton": "تسجيل الدخول",
    "loggingIn": "جاري تسجيل الدخول...",
    "createAccount": "إنشاء حساب",
    "registerDescription": "أنشئ حسابك للبدء",
    "fullName": "الاسم الكامل",
    "yourNamePlaceholder": "اسمك الكامل",
    "nameRequired": "الاسم مطلوب",
    "emailRequired": "البريد الإلكتروني مطلوب",
    "passwordMinLength": "يجب أن تحتوي كلمة المرور على 6 أحرف على الأقل",
    "passwordsDoNotMatch": "كلمات المرور غير متطابقة",
    "registrationError": "خطأ في التسجيل",
    "creatingAccount": "جاري إنشاء الحساب...",
    "createMyAccount": "إنشاء حسابي",
    "hasAccountQuestion": "هل لديك حساب بالفعل؟",
    "role.customerTitle": "عميل",
    "role.supplierTitle": "مورد",
    "role.sourcerTitle": "باحث",
    "role.customerDescription": "شراء المنتجات من الموردين",
    "role.supplierDescription": "بيع منتجاتك للعملاء",
    "role.sourcerDescription": "مساعدة العملاء في العثور على أفضل الموردين",
    "andOur": "وسياسة"
  },
  "zh": {
    "home": "首页",
    "search": "搜索",
    "search.placeholder": "搜索产品...",
    "dashboard": "仪表板",
    "nav.login": "登录",
    "logout": "登出",
    "discover": "发现",
    "email": "邮箱",
    "password": "密码",
    "confirmPassword": "确认密码",
    "login": "登录",
    "register": "注册",
    "loginDescription": "登录以访问您的账户",
    "accountType": "账户类型",
    "role.customer": "客户",
    "role.supplier": "供应商",
    "role.sourcer": "采购商",
    "role.influencer": "影响者",
    "emailPlaceholder": "您的@邮箱.com",
    "passwordPlaceholder": "••••••••",
    "rememberMe": "记住我",
    "forgotPassword": "忘记密码？",
    "loginButton": "登录",
    "loggingIn": "登录中...",
    "createAccount": "创建账户",
    "registerDescription": "创建您的账户开始使用",
    "fullName": "全名",
    "yourNamePlaceholder": "您的全名",
    "nameRequired": "姓名是必需的",
    "emailRequired": "邮箱是必需的",
    "passwordMinLength": "密码必须至少6个字符",
    "passwordsDoNotMatch": "密码不匹配",
    "registrationError": "注册错误",
    "creatingAccount": "创建账户中...",
    "createMyAccount": "创建我的账户",
    "hasAccountQuestion": "已经有账户了？",
    "role.customerTitle": "客户",
    "role.supplierTitle": "供应商",
    "role.sourcerTitle": "采购商",
    "role.customerDescription": "从供应商购买产品",
    "role.supplierDescription": "向客户销售您的产品",
    "role.sourcerDescription": "帮助客户找到最好的供应商",
    "andOur": "和我们的"
  },
  "pt": {
    "home": "Início",
    "search": "Pesquisar",
    "search.placeholder": "Pesquisar produtos...",
    "dashboard": "Painel",
    "nav.login": "Entrar",
    "logout": "Sair",
    "discover": "Descobrir",
    "email": "Email",
    "password": "Senha",
    "confirmPassword": "Confirmar senha",
    "login": "Entrar",
    "register": "Registrar",
    "loginDescription": "Entre para acessar sua conta",
    "accountType": "Tipo de conta",
    "role.customer": "Cliente",
    "role.supplier": "Fornecedor",
    "role.sourcer": "Sourcer",
    "role.influencer": "Influenciador",
    "emailPlaceholder": "seu@email.com",
    "passwordPlaceholder": "••••••••",
    "rememberMe": "Lembrar de mim",
    "forgotPassword": "Esqueceu a senha?",
    "loginButton": "Entrar",
    "loggingIn": "Entrando...",
    "createAccount": "Criar conta",
    "registerDescription": "Crie sua conta para começar",
    "fullName": "Nome completo",
    "yourNamePlaceholder": "Seu nome completo",
    "nameRequired": "Nome é obrigatório",
    "emailRequired": "Email é obrigatório",
    "passwordMinLength": "A senha deve ter pelo menos 6 caracteres",
    "passwordsDoNotMatch": "As senhas não coincidem",
    "registrationError": "Erro de registro",
    "creatingAccount": "Criando conta...",
    "createMyAccount": "Criar minha conta",
    "hasAccountQuestion": "Já tem uma conta?",
    "role.customerTitle": "Cliente",
    "role.supplierTitle": "Fornecedor",
    "role.sourcerTitle": "Sourcer",
    "role.customerDescription": "Comprar produtos de fornecedores",
    "role.supplierDescription": "Vender seus produtos para clientes",
    "role.sourcerDescription": "Ajudar clientes a encontrar os melhores fornecedores",
    "andOur": "e nossa"
  },
  "nl": {
    "home": "Home",
    "search": "Zoeken",
    "search.placeholder": "Zoek naar producten...",
    "dashboard": "Dashboard",
    "nav.login": "Inloggen",
    "logout": "Uitloggen",
    "discover": "Ontdekken",
    "email": "Email",
    "password": "Wachtwoord",
    "confirmPassword": "Bevestig wachtwoord",
    "login": "Inloggen",
    "register": "Registreren",
    "loginDescription": "Log in om toegang te krijgen tot uw account",
    "accountType": "Accounttype",
    "role.customer": "Klant",
    "role.supplier": "Leverancier",
    "role.sourcer": "Sourcer",
    "role.influencer": "Influencer",
    "emailPlaceholder": "uw@email.com",
    "passwordPlaceholder": "••••••••",
    "rememberMe": "Onthoud mij",
    "forgotPassword": "Wachtwoord vergeten?",
    "loginButton": "Inloggen",
    "loggingIn": "Inloggen...",
    "createAccount": "Account aanmaken",
    "registerDescription": "Maak uw account aan om te beginnen",
    "fullName": "Volledige naam",
    "yourNamePlaceholder": "Uw volledige naam",
    "nameRequired": "Naam is verplicht",
    "emailRequired": "Email is verplicht",
    "passwordMinLength": "Wachtwoord moet minimaal 6 tekens hebben",
    "passwordsDoNotMatch": "Wachtwoorden komen niet overeen",
    "registrationError": "Registratiefout",
    "creatingAccount": "Account aanmaken...",
    "createMyAccount": "Mijn account aanmaken",
    "hasAccountQuestion": "Heeft u al een account?",
    "role.customerTitle": "Klant",
    "role.supplierTitle": "Leverancier",
    "role.sourcerTitle": "Sourcer",
    "role.customerDescription": "Producten kopen van leveranciers",
    "role.supplierDescription": "Uw producten verkopen aan klanten",
    "role.sourcerDescription": "Klanten helpen de beste leveranciers te vinden",
    "andOur": "en ons"
  }
};

const languageNames: Record<UserLanguage, string> = {
  'fr': 'Français',
  'en': 'English',
  'es': 'Español',
  'ar': 'العربية',
  'zh': '中文',
  'pt': 'Português',
  'nl': 'Nederlands'
};

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

export const LanguageProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [language, setLanguage] = useState<UserLanguage>('fr');
  const { user } = useAuth();

  useEffect(() => {
    const savedLanguage = localStorage.getItem('language') as UserLanguage;
    if (savedLanguage && Object.keys(translations).includes(savedLanguage)) {
      setLanguage(savedLanguage);
    } else if (user?.language) {
      setLanguage(user.language);
    }
  }, [user]);

  const handleSetLanguage = (lang: UserLanguage) => {
    setLanguage(lang);
    localStorage.setItem('language', lang);
  };

  const t = (key: string, params?: Record<string, any>): string => {
    const keys = key.split('.');
    let value: any = translations[language];

    // Try to get value from current language
    for (const k of keys) {
      if (value && typeof value === 'object' && k in value) {
        value = value[k];
      } else {
        value = null;
        break;
      }
    }

    // If not found, try French fallback
    if (value === null || typeof value !== 'string') {
      value = translations['fr'];
      for (const k of keys) {
        if (value && typeof value === 'object' && k in value) {
          value = value[k];
        } else {
          return key; // Return key if not found in any language
        }
      }
    }

    if (typeof value !== 'string') {
      return key;
    }

    // Replace parameters in the translation
    if (params) {
      return value.replace(/\{(\d+)\}/g, (match, index) => {
        const paramIndex = parseInt(index);
        return params[paramIndex]?.toString() || match;
      });
    }

    return value;
  };

  const availableLanguages: UserLanguage[] = ['fr', 'en', 'es', 'ar', 'zh', 'pt', 'nl'];

  const getLanguageName = (lang: UserLanguage): string => {
    return languageNames[lang] || lang;
  };

  return (
    <LanguageContext.Provider value={{
      language,
      setLanguage: handleSetLanguage,
      t,
      availableLanguages,
      getLanguageName
    }}>
      {children}
    </LanguageContext.Provider>
  );
};

export const useLanguage = () => {
  const context = useContext(LanguageContext);
  if (context === undefined) {
    throw new Error('useLanguage must be used within a LanguageProvider');
  }
  return context;
};