import{g as O,h as D,u as E,c as V,d as B,r as l,R as Z,j as e,e as H,L as c,M as _,b as w,C as X,T as G,f as J,H as K,X as C}from"./index-DbrDj4Du.js";import{b as U,c as W}from"./useProducts-u3id3CXK.js";import{A as Y}from"./arrow-left-2Q9fRMZ4.js";import{S as ee}from"./shield-K9SayZ_V.js";import{M as re}from"./minus-qn8EODQ3.js";import{P as se}from"./plus-7lddUlfR.js";import{M as te}from"./message-circle-G64tI-73.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],ie=O("zoom-in",ae),ue=()=>{const{id:h}=D(),{product:r,loading:z,error:p}=U(h),{products:P}=W(h,r?.category),{toggleFavorite:S,isFavorite:d}=E(),{addToQuote:F,getItemQuantity:T}=V(),{showToast:y}=B(),[j,f]=l.useState(0),[i,k]=l.useState(0),[x,Q]=l.useState({}),[I,o]=l.useState(!1),[q,g]=l.useState(!1);if(Z.useEffect(()=>{r&&(f(0),k(r.moq))},[r]),z)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx(H,{size:"lg"})});if(p)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Erreur"}),e.jsx("p",{className:"text-gray-600",children:p}),e.jsx(c,{to:"/products",className:"mt-4 inline-block px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Retour aux produits"})]})});if(!r)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Produit non trouvé"}),e.jsx(c,{to:"/products",className:"mt-4 inline-block px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Retour aux produits"})]})});const n=r.images[j],$=Object.values(x).reduce((s,t)=>{const a=r.variants?.find(A=>A.id===t);return s+(a?.price||0)},0),m=r.price+$,u=r.discount&&i>=r.discount.minQty,v=(u?m*(1-r.discount.percentage/100):m)*i,M=(s,t)=>{Q(a=>({...a,[s]:t}))},b=s=>{s>=r.moq&&k(s)},R=r.variants?.reduce((s,t)=>(s[t.type]||(s[t.type]=[]),s[t.type].push(t),s),{})||{},L=()=>{const s={id:r.id,name:r.name,description:r.description,price:m,image:r.images[0].url,moq:r.moq,category:r.category,supplier:{name:r.supplier.name,location:r.supplier.location,rating:r.supplier.rating,verified:r.supplier.verified},variants:r.variants?.map(t=>t.name)||[],stock:r.stock||0,tags:r.tags||[],discount:r.discount};F(s,i,x),y(`${r.name} ajouté au devis (${i} unités)`,"success","cart")},N=T(r.id)>0;return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs(c,{to:"/products",className:"inline-flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:[e.jsx(Y,{size:20}),"Retour aux produits"]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:n.url,alt:n.alt,className:"w-full h-96 lg:h-[500px] object-cover rounded-2xl shadow-lg cursor-zoom-in transition-transform duration-300 group-hover:scale-105",onClick:()=>o(!0)}),e.jsx("button",{onClick:()=>o(!0),className:"absolute top-4 right-4 p-2 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-full opacity-0 group-hover:opacity-100 transition-all duration-300 hover:scale-110",children:e.jsx(ie,{size:20,className:"text-gray-700 dark:text-gray-300"})})]}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:r.images.map(s=>e.jsx("button",{onClick:()=>f(r.images.indexOf(s)),className:`relative overflow-hidden rounded-lg transition-all duration-300 ${j===r.images.indexOf(s)?"ring-2 ring-blue-500 ring-offset-2 dark:ring-offset-gray-900":"hover:opacity-80"}`,children:e.jsx("img",{src:s.url,alt:s.alt,className:"w-full h-20 object-cover"})},s.id))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:r.name}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:[r.price.toFixed(2),"€",e.jsx("span",{className:"text-lg text-gray-500 dark:text-gray-400",children:"/unité"})]}),u&&e.jsxs("div",{className:"px-3 py-1 bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300 rounded-full text-sm font-semibold",children:["-",r.discount.percentage,"% dès ",r.discount.minQty," pcs"]})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg leading-relaxed",children:r.description})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-4",children:[r.supplier.avatar&&e.jsx("img",{src:r.supplier.avatar,alt:r.supplier.name,className:"w-12 h-12 rounded-full object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:r.supplier.name}),r.supplier.verified&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 rounded-full text-xs",children:[e.jsx(ee,{size:12}),"Vérifié"]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(_,{size:14}),r.supplier.location]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(w,{size:14,className:"text-yellow-400 fill-current"}),r.supplier.rating]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(X,{size:14}),"Répond en ",r.supplier.responseTime]})]})]})]})}),Object.entries(R).map(([s,t])=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white capitalize",children:s==="color"?"Couleur":s==="size"?"Taille":"Matériau"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(a=>e.jsxs("button",{onClick:()=>a.available&&M(s,a.id),disabled:!a.available,className:`px-4 py-2 rounded-lg border transition-all duration-300 ${x[s]===a.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":a.available?"border-gray-300 dark:border-gray-600 hover:border-blue-300 dark:hover:border-blue-500 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700":"border-gray-200 dark:border-gray-700 text-gray-400 dark:text-gray-600 cursor-not-allowed bg-gray-50 dark:bg-gray-800"}`,children:[s==="color"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:a.value}}),a.name]}),s!=="color"&&e.jsx("span",{children:a.name}),a.price&&e.jsxs("span",{className:"ml-1 text-xs text-gray-500",children:["+",a.price.toFixed(2),"€"]})]},a.id))})]},s)),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Quantité (MOQ: ",r.moq,")"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>b(i-10),className:"p-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-gray-700 dark:text-gray-300",children:e.jsx(re,{size:16})}),e.jsx("input",{type:"number",value:i,onChange:s=>b(Number(s.target.value)),min:r.moq,className:"w-24 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-center focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-medium"}),e.jsx("button",{onClick:()=>b(i+10),className:"p-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-gray-700 dark:text-gray-300",children:e.jsx(se,{size:16})})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Stock: ",r.stock.toLocaleString()," disponibles"]})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Prix total"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[v.toFixed(2),"€"]})]}),u&&e.jsxs("div",{className:"text-sm text-green-600 dark:text-green-400",children:["Réduction de ",r.discount.percentage,"% appliquée"]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[(v/i).toFixed(2),"€ par unité"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400",children:[e.jsx(G,{size:20}),e.jsxs("span",{children:["Livraison estimée: ",r.deliveryTime.min,"-",r.deliveryTime.max," ",r.deliveryTime.unit==="days"?"jours":"semaines"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:L,className:`w-full py-4 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center justify-center gap-2 ${N?"bg-green-600 text-white hover:bg-green-700":"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700"}`,children:[e.jsx(J,{size:20}),N?"Déjà dans le devis":"Ajouter au devis"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>g(!0),className:"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 py-3 rounded-xl font-semibold border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 transition-all duration-300 flex items-center justify-center gap-2",children:[e.jsx(te,{size:18}),"Contacter"]}),e.jsxs("button",{onClick:()=>{S(r.id);const s=d(r.id);y(s?`${r.name} retiré des favoris`:`${r.name} ajouté aux favoris`,"success","heart")},className:`py-3 rounded-xl font-semibold border transition-all duration-300 flex items-center justify-center gap-2 ${d(r.id)?"bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 border-red-300 dark:border-red-600":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:[e.jsx(K,{size:18,fill:d(r.id)?"currentColor":"none"}),d(r.id)?"Ajouté":"Favoris"]})]})]})]})]}),e.jsxs("div",{className:"mt-16 bg-white dark:bg-gray-800 rounded-2xl p-8 border border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Description détaillée"}),e.jsx("div",{className:"prose dark:prose-invert max-w-none",children:r.longDescription.split(`

`).map((s,t)=>e.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed mb-4",children:s.trim()},t))})]}),e.jsxs("div",{className:"mt-8 bg-white dark:bg-gray-800 rounded-2xl p-8 border border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Spécifications techniques"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(r.specifications).map(([s,t])=>e.jsxs("div",{className:"flex justify-between py-3 border-b border-gray-200 dark:border-gray-700 last:border-b-0",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:s}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:t})]},s))})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Caractéristiques"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.tags.map((s,t)=>e.jsx("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 rounded-full text-sm font-medium",children:s},t))})]}),e.jsxs("div",{className:"mt-16",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-8",children:"Produits similaires"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:P.map(s=>e.jsxs(c,{to:`/product/${s.id}`,className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-all duration-300 group",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-48 object-cover rounded-lg mb-4 group-hover:scale-105 transition-transform duration-300"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:s.name}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:[s.price.toFixed(2),"€"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(w,{size:14,className:"text-yellow-400 fill-current"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"4.5"})]})]})]},s.id))})]})]}),I&&e.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>o(!1),children:e.jsxs("div",{className:"relative max-w-4xl max-h-[90vh]",children:[e.jsx("img",{src:n.url,alt:n.alt,className:"max-w-full max-h-full object-contain rounded-lg"}),e.jsx("button",{onClick:()=>o(!1),className:"absolute top-4 right-4 p-2 bg-white/10 backdrop-blur-sm rounded-full hover:bg-white/20 transition-colors",children:e.jsx(C,{size:24,className:"text-white"})})]})}),q&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:s=>s.target===s.currentTarget&&g(!1),children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Contacter le fournisseur"}),e.jsx("button",{onClick:()=>g(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(C,{size:20})})]}),e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Votre message"}),e.jsx("textarea",{rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Bonjour, je suis intéressé par ce produit..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Quantité souhaitée"}),e.jsx("input",{type:"number",value:i,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Envoyer le message"})]})]})})]})};export{ue as default};
