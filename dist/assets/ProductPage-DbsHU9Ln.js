import{g as N,h as A,x as H,y as R,z as L,r as c,j as e,L as C,A as z,B as j,D as O,P as U,H as V}from"./index-DbrDj4Du.js";import{p as Q}from"./productsService-Dn4X7My8.js";import{B as n}from"./Button-BXIi94zn.js";import{M as Y}from"./message-square-BGKFoHMd.js";import{C as G}from"./chevron-down-CrKgMLOh.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],K=N("chevron-left",J);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],X=N("chevron-up",W);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],P=N("play",Z),ie=()=>{const{id:l}=A(),{t,language:m}=H(),{user:r,updateUser:o}=R(),{currency:v}=L(),[s,F]=c.useState(null),[w,S]=c.useState(0),[q,h]=c.useState(!1),[$,g]=c.useState(!1),[d,x]=c.useState(""),[k,u]=c.useState(!1),[p,D]=c.useState(!1),[y,f]=c.useState(!1),b=r?.favorites?.includes(l||"")||!1;if(c.useEffect(()=>{if(l){const a=Q.getProductById(l);F(a||null)}},[l]),c.useEffect(()=>{if(r&&l&&s&&!r.browsingHistory.includes(l)){const a=[l,...r.browsingHistory].slice(0,10);o({browsingHistory:a})}},[r,l,s,o]),!s)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:t("notFoundTitle")}),e.jsx(C,{to:"/search",className:"mt-4 inline-block text-blue-700 hover:underline",children:t("backToSearch")})]})});const M=()=>{if(!r)return;const a=b?r.favorites.filter(i=>i!==l):[...r.favorites,l||""];o({favorites:a})},T=a=>{if(a.preventDefault(),!r||!d.trim())return;const i={id:`msg_${Date.now()}`,supplierId:s.id,supplierName:s.supplier.name,content:d,date:new Date().toISOString().split("T")[0]};o({messages:[...r.messages,i]}),x(""),u(!0),setTimeout(()=>{u(!1),h(!1)},3e3)},B=a=>{if(a.preventDefault(),!r||!d.trim())return;const i={id:`msg_${Date.now()}`,supplierId:s.id,supplierName:s.supplier.name,content:`[${t("sampleRequestPrefix")}] ${d}`,date:new Date().toISOString().split("T")[0]};o({messages:[...r.messages,i]}),x(""),u(!0),setTimeout(()=>{u(!1),g(!1)},3e3)},I=()=>m==="fr"&&s.description.french?s.description.french:s.description.english?s.description.english:s.description.chinese,_=s.price.cny,E=z(_,v);return e.jsxs("div",{className:"min-h-screen bg-gray-50 py-8",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(C,{to:"/search",className:"inline-flex items-center text-blue-700 hover:underline",children:[e.jsx(K,{className:"h-4 w-4 mr-1"}),t("backToResults")]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:e.jsxs("div",{className:"md:flex",children:[e.jsxs("div",{className:"md:w-1/2",children:[e.jsx("div",{className:"relative pb-[75%] bg-gray-100",children:y&&s.video?e.jsx("div",{className:"absolute inset-0 w-full h-full",children:s.video.type==="youtube"&&e.jsx("iframe",{src:`${s.video.url}?autoplay=1`,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"w-full h-full"})}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:s.images[w],alt:j(s,m),className:"absolute inset-0 w-full h-full object-contain p-4"}),s.video&&e.jsx("button",{onClick:()=>f(!0),className:"absolute bottom-4 right-4 bg-blue-700 text-white p-2 rounded-full shadow-lg hover:bg-blue-800 transition-colors",children:e.jsx(P,{className:"h-6 w-6"})}),s.certifiedCE&&e.jsx("span",{className:"absolute top-4 right-4 bg-green-500 text-white text-sm font-bold px-2 py-1 rounded-full",children:"CE"})]})}),s.images.length>1&&e.jsxs("div",{className:"flex p-2 overflow-x-auto",children:[s.images.map((a,i)=>e.jsx("button",{onClick:()=>{S(i),f(!1)},className:`mr-2 rounded border-2 ${i===w&&!y?"border-blue-500":"border-transparent"}`,children:e.jsx("img",{src:a,alt:`${j(s,m)} thumbnail ${i+1}`,className:"h-16 w-16 object-cover rounded"})},i)),s.video&&e.jsxs("button",{onClick:()=>{f(!0),S(-1)},className:`mr-2 rounded border-2 relative ${y?"border-blue-500":"border-transparent"}`,children:[e.jsx("img",{src:s.video.thumbnail,alt:"Product video thumbnail",className:"h-16 w-16 object-cover rounded"}),e.jsx(P,{className:"absolute inset-0 m-auto h-8 w-8 text-white opacity-90"})]})]})]}),e.jsxs("div",{className:"md:w-1/2 p-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:j(s,m)}),e.jsxs("p",{className:"text-lg text-gray-600 mb-4",children:[t("category"),": ",s.category]}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("p",{className:"text-4xl font-extrabold text-blue-700 mr-4",children:O(E,v)}),s.pricePerUnit&&e.jsxs("span",{className:"text-gray-500 text-sm",children:["/ ",t("unit")]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:t("description")}),e.jsx("p",{className:"text-gray-700",children:I()})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mb-6",children:[e.jsxs(n,{variant:"primary",onClick:()=>h(!0),className:"flex items-center",children:[e.jsx(Y,{className:"h-5 w-5 mr-2"}),t("contactSupplier")]}),e.jsxs(n,{variant:"secondary",onClick:()=>g(!0),className:"flex items-center",children:[e.jsx(U,{className:"h-5 w-5 mr-2"}),t("requestSample")]}),e.jsxs(n,{variant:"ghost",onClick:M,className:"flex items-center",children:[e.jsx(V,{className:`h-5 w-5 mr-2 ${b?"fill-red-500 text-red-500":"text-gray-400"}`}),t(b?"removeFromFavorites":"addToFavorites")]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:t("minOrderQuantity")}),e.jsxs("p",{className:"text-gray-700",children:[s.moq," ",t("units")]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:t("supplier")}),e.jsx("p",{className:"text-gray-700",children:s.supplier.name})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:t("certifications")}),e.jsx("p",{className:"text-gray-700",children:s.certifiedCE?t("ceCertified"):t("notCeCertified")})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:t("specifications")}),e.jsx("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:e.jsxs("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-500",children:t("specs.brand")}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-100",children:s.specifications.brand})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-500",children:t("specs.origin")}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-100",children:s.specifications.origin})]}),e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-500",children:t("specs.style")}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-100",children:s.specifications.style})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-500",children:t("specs.modelNumber")}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-100",children:s.specifications.modelNumber})]}),e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-500",children:t("specs.application")}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-100",children:s.specifications.application})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-500",children:t("specs.material")}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-100",children:s.specifications.material})]}),p&&s.specifications.additionalSpecs&&Object.entries(s.specifications.additionalSpecs).map(([a,i])=>e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-500",children:a}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-100",children:i})]},a))]})}),e.jsxs("button",{onClick:()=>D(!p),className:"mt-2 text-blue-600 hover:text-blue-800 text-sm flex items-center",children:[t(p?"hideSpecs":"showAllSpecs"),p?e.jsx(X,{className:"ml-1 h-4 w-4"}):e.jsx(G,{className:"ml-1 h-4 w-4"})]})]})]})]})})]}),q&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:t("contactSupplierTitle")}),e.jsx("p",{className:"text-gray-600 mb-4",children:t("contactSupplierDescription")}),e.jsxs("form",{onSubmit:T,children:[e.jsx("textarea",{className:"w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:6,placeholder:t("yourMessagePlaceholder"),value:d,onChange:a=>x(a.target.value),required:!0}),e.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[e.jsx(n,{variant:"secondary",onClick:()=>h(!1),children:t("cancelButton")}),e.jsx(n,{type:"submit",variant:"primary",children:t("sendMessageButton")})]}),k&&e.jsx("p",{className:"mt-2 text-green-600 text-sm",children:t("messageSentConfirmation")})]})]})}),$&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:t("requestSampleTitle")}),e.jsx("p",{className:"text-gray-600 mb-4",children:t("requestSampleDescription")}),e.jsxs("form",{onSubmit:B,children:[e.jsx("textarea",{className:"w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:6,placeholder:t("yourSampleRequestMessagePlaceholder"),value:d,onChange:a=>x(a.target.value),required:!0}),e.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[e.jsx(n,{variant:"secondary",onClick:()=>g(!1),children:t("cancelButton")}),e.jsx(n,{type:"submit",variant:"primary",children:t("sendRequestButton")})]}),k&&e.jsx("p",{className:"mt-2 text-green-600 text-sm",children:t("requestSentConfirmation")})]})]})})]})};export{ie as default};
