import{r as a,j as e,ab as n,J as c,aa as g,P,Z as B}from"./index-DbrDj4Du.js";import{B as x}from"./Button-BXIi94zn.js";import{A as M}from"./AdminLayout-DJvW88_N.js";import{S as I}from"./shield-K9SayZ_V.js";import{E as R}from"./eye-BDcpPqwB.js";import{M as u}from"./message-square-BGKFoHMd.js";import"./chart-column-zn556lbz.js";const G=()=>{const[i,l]=a.useState([]),[h,m]=a.useState(!1),[d,y]=a.useState(""),[o,j]=a.useState(""),[p,b]=a.useState(""),f=[{id:"1",type:"product",title:"Produit suspect signalé",description:"Produit potentiellement contrefait - iPhone 15 à 50€",reportedBy:"client.secure@email.com",reportedAt:new Date("2024-01-15T10:30:00"),status:"pending",priority:"high",content:"Ce produit semble être une contrefaçon. Le prix est anormalement bas et les images ne correspondent pas à un vrai iPhone.",images:["/public/categories/electronics.svg"]},{id:"2",type:"user",title:"Comportement suspect utilisateur",description:"Utilisateur créant de multiples comptes",reportedBy:"moderator@chinetousine.com",reportedAt:new Date("2024-01-14T16:45:00"),status:"pending",priority:"medium",content:"Cet utilisateur a créé 5 comptes avec des emails similaires en 24h."},{id:"3",type:"review",title:"Avis inapproprié",description:"Avis contenant un langage inapproprié",reportedBy:"autre.client@email.com",reportedAt:new Date("2024-01-14T09:20:00"),status:"approved",priority:"low",content:"Avis validé après révision - pas de contenu inapproprié détecté."},{id:"4",type:"message",title:"Message de spam",description:"Message commercial non sollicité",reportedBy:"destinataire@email.com",reportedAt:new Date("2024-01-13T14:15:00"),status:"rejected",priority:"high",content:"Message de spam confirmé et utilisateur sanctionné."}],v=async()=>{m(!0);try{await new Promise(t=>setTimeout(t,1e3)),l(f)}catch(t){console.error("Erreur lors du chargement:",t),b(t instanceof Error?t.message:"Erreur lors du chargement des éléments")}finally{m(!1)}};a.useEffect(()=>{v()},[]);const w=i.filter(t=>{const s=d===""||t.type===d,r=o===""||t.status===o;return s&&r}),N=t=>({user:e.jsx(B,{size:16}),product:e.jsx(P,{size:16}),review:e.jsx(u,{size:16}),message:e.jsx(u,{size:16})})[t]||e.jsx(n,{size:16}),k=t=>({user:"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100",product:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100",review:"bg-orange-100 text-orange-800 dark:bg-orange-800 dark:text-orange-100",message:"bg-orange-100 text-orange-800 dark:bg-orange-800 dark:text-orange-100"})[t]||"bg-gray-100 text-gray-800",z=t=>({low:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200",medium:"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100",high:"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100"})[t]||"bg-gray-100 text-gray-800",A=t=>({pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100",approved:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100",rejected:"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100"})[t]||"bg-gray-100 text-gray-800",C=t=>({pending:e.jsx(n,{size:14}),approved:e.jsx(c,{size:14}),rejected:e.jsx(g,{size:14})})[t]||e.jsx(n,{size:14}),S=t=>new Intl.DateTimeFormat("fr-FR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(t),T=t=>{l(s=>s.map(r=>r.id===t?{...r,status:"approved"}:r)),console.log("Approved item:",t)},E=t=>{l(s=>s.map(r=>r.id===t?{...r,status:"rejected"}:r)),console.log("Rejected item:",t)};return e.jsx(M,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Modération"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Gérez les signalements et modérez le contenu de la plateforme"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(n,{className:"h-8 w-8 text-yellow-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"En attente"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:i.filter(t=>t.status==="pending").length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(c,{className:"h-8 w-8 text-green-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Approuvés"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:i.filter(t=>t.status==="approved").length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(g,{className:"h-8 w-8 text-red-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Rejetés"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:i.filter(t=>t.status==="rejected").length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{className:"h-8 w-8 text-purple-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Priorité élevée"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:i.filter(t=>t.priority==="high").length})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"w-full sm:w-48",children:e.jsxs("select",{value:d,onChange:t=>y(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"",children:"Tous les types"}),e.jsx("option",{value:"user",children:"Utilisateur"}),e.jsx("option",{value:"product",children:"Produit"}),e.jsx("option",{value:"review",children:"Avis"}),e.jsx("option",{value:"message",children:"Message"})]})}),e.jsx("div",{className:"w-full sm:w-48",children:e.jsxs("select",{value:o,onChange:t=>j(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"",children:"Tous les statuts"}),e.jsx("option",{value:"pending",children:"En attente"}),e.jsx("option",{value:"approved",children:"Approuvé"}),e.jsx("option",{value:"rejected",children:"Rejeté"})]})})]})}),e.jsx("div",{className:"space-y-4",children:h?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:"Chargement..."})]}):w.map(t=>e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium ${k(t.type)}`,children:[N(t.type),t.type]}),e.jsx("span",{className:`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium ${z(t.priority)}`,children:t.priority}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium ${A(t.status)}`,children:[C(t.status),t.status]})]}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:t.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:t.description}),t.content&&e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3 mb-3",children:e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:t.content})}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:["Signalé par: ",t.reportedBy]}),e.jsx("span",{children:S(t.reportedAt)})]})]}),t.status==="pending"&&e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsxs(x,{onClick:()=>console.log("View details:",t),variant:"outline",size:"sm",className:"flex items-center gap-1",children:[e.jsx(R,{size:14}),"Voir"]}),e.jsxs(x,{onClick:()=>T(t.id),size:"sm",className:"flex items-center gap-1 bg-green-600 hover:bg-green-700",children:[e.jsx(c,{size:14}),"Approuver"]}),e.jsxs(x,{onClick:()=>E(t.id),size:"sm",className:"flex items-center gap-1 bg-red-600 hover:bg-red-700",children:[e.jsx(g,{size:14}),"Rejeter"]})]})]})},t.id))}),p&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsx("p",{className:"text-red-600",children:p})})]})})};export{G as default};
