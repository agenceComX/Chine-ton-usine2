import{x as w,r as d,j as e,P as o,M as C}from"./index-DbrDj4Du.js";import{c as D}from"./containerService-t0n3X4-G.js";import{A as g,S as L}from"./AdminLayout-DJvW88_N.js";import{P as S}from"./plus-7lddUlfR.js";import{S as M}from"./square-pen-Ct6V3DPX.js";import{T as E}from"./trash-2-ZdXwmmSk.js";import"./chart-column-zn556lbz.js";import"./shield-K9SayZ_V.js";const z=()=>{const{t:x}=w(),[l,h]=d.useState([]),[p,u]=d.useState(!0),[y,n]=d.useState(!1),[i,m]=d.useState(null),[a,s]=d.useState({name:"",departureLocation:"",arrivalLocation:"",estimatedDepartureDate:"",totalCapacity:1e3,usedCapacity:0,status:"active"});d.useEffect(()=>{c()},[]);const c=async()=>{try{u(!0);const t=await D.getContainers();h(t)}catch(t){console.error("Error loading containers:",t)}finally{u(!1)}},b=()=>{s({name:"",departureLocation:"",arrivalLocation:"",estimatedDepartureDate:"",totalCapacity:1e3,usedCapacity:0,status:"active"}),m(null),n(!0)},f=t=>{s({name:t.name,departureLocation:t.departureLocation,arrivalLocation:t.arrivalLocation,estimatedDepartureDate:t.estimatedDepartureDate,totalCapacity:t.totalCapacity,usedCapacity:t.usedCapacity,status:t.status}),m(t),n(!0)},j=async t=>{t.preventDefault();try{i?console.log("Updating container:",i.id,a):console.log("Creating new container:",a),n(!1),c(),alert(i?"Conteneur mis à jour avec succès":"Conteneur créé avec succès")}catch(r){console.error("Error saving container:",r),alert("Erreur lors de la sauvegarde du conteneur")}},v=async t=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer ce conteneur ?"))try{console.log("Deleting container:",t),alert("Conteneur supprimé avec succès"),c()}catch(r){console.error("Error deleting container:",r),alert("Erreur lors de la suppression du conteneur")}},N=t=>{const r=t.usedCapacity/t.totalCapacity*100;return t.status==="closed"?"bg-gray-500":r>=90?"bg-red-500":r>=70?"bg-orange-500":"bg-green-500"};return p?e.jsx(g,{children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})})}):e.jsxs(g,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:x("containers.title")}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Gérez les conteneurs et leurs capacités"})]}),e.jsxs("button",{onClick:b,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[e.jsx(S,{className:"w-4 h-4"}),e.jsx("span",{children:"Nouveau conteneur"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(o,{className:"w-8 h-8 text-blue-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:l.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(L,{className:"w-8 h-8 text-green-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Actifs"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:l.filter(t=>t.status==="active").length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(o,{className:"w-8 h-8 text-gray-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Fermés"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:l.filter(t=>t.status==="closed").length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{className:"w-8 h-8 text-orange-500"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Capacité totale"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:[l.reduce((t,r)=>t+r.totalCapacity,0)," CBM"]})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Liste des conteneurs"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Nom"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Itinéraire"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Capacité"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Statut"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Départ estimé"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:l.map(t=>{const r=t.usedCapacity/t.totalCapacity*100,k=N(t);return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(o,{className:"w-5 h-5 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.name}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ID: ",t.id]})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:t.departureLocation}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["→ ",t.arrivalLocation]})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[t.usedCapacity," / ",t.totalCapacity," CBM"]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-1",children:e.jsx("div",{className:`${k} h-2 rounded-full transition-all duration-300`,style:{width:`${r}%`}})})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t.status==="active"?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:x(`containers.status.${t.status}`)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:new Date(t.estimatedDepartureDate).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2 justify-end",children:[e.jsx("button",{onClick:()=>f(t),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:e.jsx(M,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>v(t.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(E,{className:"w-4 h-4"})})]})})]},t.id)})})]})})]})]}),y&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-xl w-full max-w-2xl mx-4",children:[e.jsx("h3",{className:"text-xl font-bold mb-6 text-gray-900 dark:text-white",children:i?"Modifier le conteneur":"Nouveau conteneur"}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nom du conteneur"}),e.jsx("input",{type:"text",value:a.name,onChange:t=>s({...a,name:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Lieu de départ"}),e.jsx("input",{type:"text",value:a.departureLocation,onChange:t=>s({...a,departureLocation:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Lieu d'arrivée"}),e.jsx("input",{type:"text",value:a.arrivalLocation,onChange:t=>s({...a,arrivalLocation:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Date de départ estimée"}),e.jsx("input",{type:"date",value:a.estimatedDepartureDate,onChange:t=>s({...a,estimatedDepartureDate:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Capacité totale (CBM)"}),e.jsx("input",{type:"number",value:a.totalCapacity,onChange:t=>s({...a,totalCapacity:parseInt(t.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",min:"1",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Capacité utilisée (CBM)"}),e.jsx("input",{type:"number",value:a.usedCapacity,onChange:t=>s({...a,usedCapacity:parseInt(t.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",min:"0",max:a.totalCapacity,required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Statut"}),e.jsxs("select",{value:a.status,onChange:t=>s({...a,status:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"active",children:"Actif"}),e.jsx("option",{value:"closed",children:"Fermé"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{type:"button",onClick:()=>n(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-200 dark:bg-gray-600 rounded-md hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",children:"Annuler"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:i?"Mettre à jour":"Créer"})]})]})]})})]})};export{z as default};
