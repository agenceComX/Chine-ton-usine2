import{E as L,y as M,x as C,r as o,j as e,L as b}from"./index-DbrDj4Du.js";import{I as y}from"./Input-CQoVujND.js";import{B as f}from"./Button-BXIi94zn.js";/* empty css                    */const A=()=>{const a=L(),{login:j}=M(),{t:r}=C(),[i,v]=o.useState(""),[u,k]=o.useState(""),[d,w]=o.useState("customer"),[h,n]=o.useState(""),[l,c]=o.useState(!1),[x,p]=o.useState(!1),N=["admin@example.com","admin@chinetonusine.com","administrator@chinetonusine.com"],m=s=>N.includes(s.toLowerCase().trim());o.useEffect(()=>{const s=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;p(s)},[]),o.useEffect(()=>{x?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[x]);const E=async s=>{s.preventDefault(),n(""),c(!0);try{if(!i.trim()||!u.trim())throw new Error(r("emptyFields"));const t=m(i)?"admin":d,g={id:`demo_${t}_${Date.now()}`,email:i.trim(),name:`Utilisateur ${t}`,role:t,favorites:[],browsingHistory:[],messages:[],subscription:"free"};switch(localStorage.setItem("demoUser",JSON.stringify(g)),await j(i.trim(),u.trim()),d){case"admin":a("/admin/dashboard",{replace:!0});break;case"supplier":a("/supplier/dashboard",{replace:!0});break;case"sourcer":a("/sourcer/dashboard",{replace:!0});break;default:a("/dashboard",{replace:!0})}}catch(t){const g=t instanceof Error?t.message:"Erreur de connexion inconnue.";n(g||r("loginError"))}finally{c(!1)}},S=async()=>{n(""),c(!0);try{const s=m("user@gmail.com")?"admin":d,t={id:`google_${s}_${Date.now()}`,email:"user@gmail.com",name:`Utilisateur Google ${s}`,role:s,favorites:[],browsingHistory:[],messages:[],subscription:"free"};switch(localStorage.setItem("demoUser",JSON.stringify(t)),s){case"admin":a("/admin/dashboard",{replace:!0});break;case"supplier":a("/supplier/dashboard",{replace:!0});break;case"sourcer":a("/sourcer/dashboard",{replace:!0});break;default:a("/dashboard",{replace:!0})}}catch(s){const t=s instanceof Error?s.message:"Une erreur est survenue lors de la connexion Google.";n(t||r("googleLoginError"))}finally{c(!1)}},I=()=>{p(s=>!s)};return e.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 text-gray-900 dark:text-white flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[e.jsx("button",{type:"button",onClick:I,className:"absolute top-4 right-4 bg-blue-600 text-white px-4 py-2 rounded",children:x?"Mode Clair":"Mode Sombre"}),e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:r("login")}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-300",children:r("loginDescription")})]}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 text-gray-900 dark:text-white py-8 px-4 shadow-xl rounded-xl sm:px-10",children:[h&&e.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-600 text-sm rounded-md p-4",children:[e.jsx("div",{className:"font-medium",children:r("loginErrorTitle")}),e.jsx("div",{className:"mt-1",children:h})]}),e.jsxs("form",{className:"space-y-6",onSubmit:E,children:[!m(i)&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:r("accountType")}),e.jsxs("select",{id:"role",value:d,onChange:s=>w(s.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",disabled:l,children:[e.jsx("option",{value:"customer",children:r("role.customer")}),e.jsx("option",{value:"supplier",children:r("role.supplier")}),e.jsx("option",{value:"sourcer",children:r("role.sourcer")})]})]}),m(i)&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 text-blue-800 dark:text-blue-200 text-sm rounded-md p-4",children:[e.jsx("div",{className:"font-medium",children:"🔐 Connexion Administrateur"}),e.jsx("div",{className:"mt-1",children:"Vous êtes identifié comme administrateur. Aucune sélection de rôle nécessaire."})]}),e.jsx(y,{type:"email",label:r("email"),value:i,onChange:s=>v(s.target.value),required:!0,placeholder:r("emailPlaceholder"),disabled:l,className:"bg-white dark:bg-gray-700 text-black dark:text-white border-gray-300 dark:border-gray-600"}),e.jsx(y,{type:"password",label:r("password"),value:u,onChange:s=>k(s.target.value),required:!0,placeholder:r("passwordPlaceholder"),disabled:l,className:"bg-white dark:bg-gray-700 text-black dark:text-white border-gray-300 dark:border-gray-600"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-orange-500 border-gray-300 dark:border-gray-600 dark:bg-gray-700 rounded",disabled:l}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900 dark:text-gray-300",children:r("rememberMe")})]}),e.jsx("div",{className:"text-sm",children:e.jsx("a",{href:"#",className:"font-medium text-blue-600 hover:text-blue-500",children:r("forgotPassword")})})]}),e.jsx(f,{type:"submit",variant:"primary",fullWidth:!0,className:"justify-center bg-blue-600 hover:bg-blue-500 text-white dark:bg-blue-700 dark:hover:bg-blue-600",disabled:l,children:r(l?"loggingIn":"loginButton")}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:r("orContinueWith")})})]}),e.jsxs(f,{type:"button",variant:"secondary",fullWidth:!0,className:"justify-center",onClick:S,disabled:l,children:[e.jsx("img",{src:"/google-icon.svg",alt:"Google",className:"h-5 w-5 mr-2"}),r("signInWithGoogle")]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:r("noAccountQuestion")})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(b,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500",tabIndex:l?-1:0,children:r("registerNow")})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[r("agreementPrefix")," ",e.jsx(b,{to:"/terms",className:"text-blue-600 hover:text-blue-500",children:r("termsOfUse")})," ",r("andOur")," ",e.jsx(b,{to:"/privacy",className:"text-blue-600 hover:text-blue-500",children:r("privacyPolicy")}),r("agreementSuffix")]})})]})})]})};export{A as default};
