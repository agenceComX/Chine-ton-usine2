import{r as a,j as e,b as m,a as A,P as L,Z as D}from"./index-DbrDj4Du.js";import{B as z}from"./Button-BXIi94zn.js";import{B as I}from"./BackButton-FxuuiGHy.js";import{S as T}from"./SupplierLayout-BDztLqG7.js";import{M as x}from"./message-square-BGKFoHMd.js";import{T as N}from"./thumbs-up-Bu-JGmqP.js";import{C as q}from"./calendar-B40bxLxD.js";import"./arrow-left-2Q9fRMZ4.js";import"./chart-column-zn556lbz.js";const _=()=>{const[s,b]=a.useState([]),[y,u]=a.useState(!1),[i,v]=a.useState(""),[n,w]=a.useState(""),[l,k]=a.useState(""),[h,R]=a.useState(""),V=[{id:"1",productId:"prod1",productName:"Smartphone Android 128GB",customerName:"Marie Dupont",customerId:"cust1",rating:5,title:"Excellent produit, livraison rapide !",comment:"Très satisfaite de mon achat. Le smartphone correspond exactement à la description et la livraison a été très rapide. Je recommande ce fournisseur.",createdAt:new Date("2024-01-12"),isVerified:!0,helpfulVotes:12,totalVotes:14,hasResponse:!0,response:{content:"Merci beaucoup Marie pour votre avis positif ! Nous sommes ravis que vous soyez satisfaite de votre achat.",createdAt:new Date("2024-01-13")}},{id:"2",productId:"prod2",productName:"Écouteurs Bluetooth",customerName:"Jean Martin",customerId:"cust2",rating:4,title:"Bonne qualité sonore",comment:"Les écouteurs ont une très bonne qualité sonore et l'autonomie est correcte. Petit bémol sur le design qui pourrait être amélioré.",createdAt:new Date("2024-01-10"),isVerified:!0,helpfulVotes:8,totalVotes:10,hasResponse:!1},{id:"3",productId:"prod3",productName:"T-shirt coton bio",customerName:"Sophie Bernard",customerId:"cust3",rating:3,title:"Qualité moyenne",comment:"Le t-shirt est correct mais la qualité du coton n'est pas exceptionnelle. Le prix reste abordable.",createdAt:new Date("2024-01-08"),isVerified:!1,helpfulVotes:3,totalVotes:8,hasResponse:!0,response:{content:"Merci pour votre retour Sophie. Nous prenons note de vos remarques sur la qualité du coton.",createdAt:new Date("2024-01-09")}},{id:"4",productId:"prod1",productName:"Smartphone Android 128GB",customerName:"Pierre Dubois",customerId:"cust4",rating:2,title:"Déçu de la batterie",comment:"Le smartphone fonctionne bien mais la batterie se décharge très rapidement. Pas ce qui était annoncé.",createdAt:new Date("2024-01-06"),isVerified:!0,helpfulVotes:5,totalVotes:12,hasResponse:!0,response:{content:"Nous sommes désolés pour ce problème Pierre. Contactez-nous en privé pour que nous puissions vous aider à résoudre ce problème de batterie.",createdAt:new Date("2024-01-07")}},{id:"5",productId:"prod4",productName:"Crème hydratante anti-âge",customerName:"Lucie Moreau",customerId:"cust5",rating:5,title:"Résultats visibles rapidement",comment:"J'utilise cette crème depuis 3 semaines et je vois déjà des résultats. Ma peau est plus hydratée et plus ferme.",createdAt:new Date("2024-01-04"),isVerified:!0,helpfulVotes:18,totalVotes:20,hasResponse:!1}],C=async()=>{u(!0);try{await new Promise(t=>setTimeout(t,1e3)),b(V)}catch(t){console.error("Erreur lors du chargement:",t),R(t instanceof Error?t.message:"Erreur lors du chargement des avis")}finally{u(!1)}};a.useEffect(()=>{C()},[]);const S=s.filter(t=>{const r=t.productName.toLowerCase().includes(i.toLowerCase())||t.customerName.toLowerCase().includes(i.toLowerCase())||t.title.toLowerCase().includes(i.toLowerCase())||t.comment.toLowerCase().includes(i.toLowerCase()),d=n===""||t.rating.toString()===n,o=l===""||l==="verified"&&t.isVerified||l==="unverified"&&!t.isVerified;return r&&d&&o}),g=(t,r=16)=>Array.from({length:5},(d,o)=>e.jsx(m,{size:r,className:o<t?"text-yellow-400 fill-current":"text-gray-300"},o)),p=t=>new Intl.DateTimeFormat("fr-FR",{year:"numeric",month:"long",day:"numeric"}).format(t),f=()=>s.length===0?0:(s.reduce((r,d)=>r+d.rating,0)/s.length).toFixed(1),j=(()=>{const t=[0,0,0,0,0];return s.forEach(r=>{t[r.rating-1]++}),t})(),c=s.length;return e.jsx(T,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(I,{to:"/supplier/dashboard",label:"Retour au tableau de bord",variant:"ghost"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Avis Clients"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Consultez et répondez aux avis de vos clients"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(m,{className:"h-8 w-8 text-yellow-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Note moyenne"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:f()}),e.jsx("div",{className:"flex",children:g(Math.round(parseFloat(f())))})]})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(x,{className:"h-8 w-8 text-blue-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total avis"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:c})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(N,{className:"h-8 w-8 text-green-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Avis positifs"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:s.filter(t=>t.rating>=4).length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(x,{className:"h-8 w-8 text-purple-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Sans réponse"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:s.filter(t=>!t.hasResponse).length})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Répartition des notes"}),e.jsx("div",{className:"space-y-3",children:[5,4,3,2,1].map(t=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1 w-20",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:t}),e.jsx(m,{size:14,className:"text-yellow-400 fill-current"})]}),e.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-yellow-400 h-2 rounded-full transition-all duration-300",style:{width:c>0?`${j[t-1]/c*100}%`:"0%"}})}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400 w-12 text-right",children:j[t-1]})]},t))})]}),"        ",e.jsx("div",{className:"bg-white dark:bg-gray-700 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-300",size:16}),e.jsx("input",{type:"text",placeholder:"Rechercher dans les avis...",value:i,onChange:t=>v(t.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-500 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-600 dark:placeholder-gray-400"})]})}),"            ",e.jsx("div",{className:"w-full sm:w-48",children:e.jsxs("select",{value:n,onChange:t=>w(t.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-500 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Toutes les notes"}),e.jsx("option",{value:"5",children:"5 étoiles"}),e.jsx("option",{value:"4",children:"4 étoiles"}),e.jsx("option",{value:"3",children:"3 étoiles"}),e.jsx("option",{value:"2",children:"2 étoiles"}),e.jsx("option",{value:"1",children:"1 étoile"})]})}),"            ",e.jsx("div",{className:"w-full sm:w-48",children:e.jsxs("select",{value:l,onChange:t=>k(t.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-500 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Tous les avis"}),e.jsx("option",{value:"verified",children:"Vérifiés"}),e.jsx("option",{value:"unverified",children:"Non vérifiés"})]})})]})}),e.jsx("div",{className:"space-y-6",children:y?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:"Chargement..."})]}):S.map(t=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-r from-blue-400 to-blue-600 flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-white font-medium text-sm",children:t.customerName.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.customerName}),t.isVerified&&e.jsx("span",{className:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100 text-xs px-2 py-1 rounded-full",children:"Vérifié"})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"flex",children:g(t.rating,14)}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t.rating,"/5"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[e.jsx(L,{size:12}),t.productName,e.jsx("span",{children:"•"}),e.jsx(q,{size:12}),p(t.createdAt)]})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:t.title}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:t.comment})]}),e.jsx("div",{className:"flex items-center gap-4 mb-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(N,{size:14}),e.jsxs("span",{children:[t.helpfulVotes," sur ",t.totalVotes," trouvent cet avis utile"]})]})}),t.hasResponse&&t.response?e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(D,{size:16,className:"text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"Réponse du fournisseur"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:p(t.response.createdAt)})]}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:t.response.content})]}):e.jsx("div",{className:"flex justify-end",children:e.jsxs(z,{onClick:()=>console.log("Respond to review:",t.id),variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(x,{size:14}),"Répondre"]})})]},t.id))}),h&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsx("p",{className:"text-red-600",children:h})})]})})};export{_ as default};
