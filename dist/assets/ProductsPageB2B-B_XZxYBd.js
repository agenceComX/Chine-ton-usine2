import{u as V,c as A,d as L,r as c,R as O,j as e,e as D,F as H,X as C,H as X,L as Q,M as G,b as I,f as R}from"./index-DbrDj4Du.js";import{u as J,a as K}from"./useProducts-u3id3CXK.js";import{E as U}from"./eye-BDcpPqwB.js";import{S as W}from"./shield-K9SayZ_V.js";import{M as Y}from"./minus-qn8EODQ3.js";import{P as Z}from"./plus-7lddUlfR.js";import{M as _}from"./message-circle-G64tI-73.js";const ee=["Toutes","Électronique","Mode","Bagagerie","Maison","Accessoires"],de=()=>{const{products:x,loading:q,error:h}=J(),{filteredProducts:g,filters:a,updateFilters:l}=K(x),{toggleFavorite:M,isFavorite:m}=V(),{addToQuote:F,getItemQuantity:z}=A(),{showToast:y}=L(),[i,f]=c.useState(null),[d,j]=c.useState(!1),[P,E]=c.useState({}),[p,v]=c.useState(!1),u=(t,r)=>{const s=x.find(n=>n.id===t);s&&r>=s.moq&&E(n=>({...n,[t]:r}))},k=t=>{const r=x.find(s=>s.id===t);return P[t]||r?.moq||0},S=(t,r)=>{let s=t.price*r;return t.discount&&r>=t.discount.minQty&&(s=s*(1-t.discount.percentage/100)),s},T=t=>{f(t),j(!0),document.body.style.overflow="hidden"},o=()=>{j(!1),f(null),document.body.style.overflow="unset"},N=t=>{const r=k(t.id);F(t,r),y(`${t.name} ajouté au devis (${r} unités)`,"success","cart")};O.useEffect(()=>{const t=r=>{r.key==="Escape"&&d&&o()};return d&&document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[d]);const $=t=>{t.target===t.currentTarget&&o()},B=()=>{l({category:"Toutes",priceRange:{min:0,max:10},moqRange:{min:0,max:500}})};return q?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsx(D,{})}):h?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Erreur"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:h}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Réessayer"})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Produits B2B"}),e.jsxs("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:[g.length," produits disponibles"]})]}),e.jsxs("button",{onClick:()=>v(!p),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(H,{size:20}),"Filtres"]})]}),p&&e.jsxs("div",{className:"mt-6 p-6 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Filtres"}),e.jsx("button",{onClick:()=>v(!1),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:e.jsx(C,{size:20})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Catégorie"}),e.jsx("select",{value:a.category,onChange:t=>l({category:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:ee.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Prix (€)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",placeholder:"Min",value:a.priceRange.min,onChange:t=>l({priceRange:{...a.priceRange,min:Number(t.target.value)}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("input",{type:"number",placeholder:"Max",value:a.priceRange.max,onChange:t=>l({priceRange:{...a.priceRange,max:Number(t.target.value)}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"MOQ (Quantité minimum)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",placeholder:"Min",value:a.moqRange?.min||0,onChange:t=>l({moqRange:{...a.moqRange,min:Number(t.target.value)}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("input",{type:"number",placeholder:"Max",value:a.moqRange?.max||1e3,onChange:t=>l({moqRange:{...a.moqRange,max:Number(t.target.value)}}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]})]})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:g.map(t=>{const r=k(t.id),s=S(t,r),n=t.discount&&r>=t.discount.minQty,w=z(t.id)>0;return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 border border-gray-200 dark:border-gray-700 overflow-hidden group",children:[e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-48 object-cover transition-transform duration-300 group-hover:scale-110"}),e.jsxs("div",{className:"absolute top-4 right-4 flex flex-col gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[e.jsx("button",{onClick:()=>{M(t.id);const b=m(t.id);y(b?`${t.name} retiré des favoris`:`${t.name} ajouté aux favoris`,"success","heart")},className:`p-2 rounded-full transition-all duration-300 ${m(t.id)?"bg-red-500 text-white":"bg-white text-gray-600 hover:bg-red-50 hover:text-red-500"}`,children:e.jsx(X,{size:18,fill:m(t.id)?"currentColor":"none"})}),e.jsx("button",{onClick:()=>T(t),className:"p-2 bg-white text-gray-600 rounded-full hover:bg-blue-50 hover:text-blue-500 transition-all duration-300",children:e.jsx(U,{size:18})})]}),n&&e.jsxs("div",{className:"absolute top-4 left-4 bg-red-500 text-white px-2 py-1 rounded-full text-xs font-semibold",children:["-",t.discount.percentage,"%"]}),t.supplier.verified&&e.jsxs("div",{className:"absolute bottom-4 left-4 bg-green-500 text-white px-2 py-1 rounded-full text-xs font-semibold flex items-center gap-1",children:[e.jsx(W,{size:12}),"Vérifié"]})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(Q,{to:`/product/${t.id}`,className:"block hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2 line-clamp-2 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:t.name})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[t.price.toFixed(2),"€"]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["MOQ: ",t.moq]})]})]}),e.jsxs("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.supplier.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(G,{size:12,className:"text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.supplier.location}),e.jsxs("div",{className:"flex items-center gap-1 ml-auto",children:[e.jsx(I,{size:12,className:"text-yellow-400 fill-current"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:t.supplier.rating})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Quantité"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>u(t.id,Math.max(t.moq,r-10)),className:"p-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-gray-700 dark:text-gray-300",children:e.jsx(Y,{size:16})}),e.jsx("input",{type:"number",value:r,onChange:b=>u(t.id,Math.max(t.moq,Number(b.target.value))),min:t.moq,className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-center focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-medium"}),e.jsx("button",{onClick:()=>u(t.id,r+10),className:"p-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-gray-700 dark:text-gray-300",children:e.jsx(Z,{size:16})})]})]}),e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total"}),e.jsxs("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:[s.toFixed(2),"€"]})]}),n&&e.jsxs("div",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:["Réduction de ",t.discount.percentage,"% appliquée"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>N(t),className:`w-full py-3 rounded-lg font-semibold transition-all duration-300 flex items-center justify-center gap-2 ${w?"bg-green-600 text-white hover:bg-green-700":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[e.jsx(R,{size:18}),w?"Déjà dans le devis":"Ajouter au devis"]}),e.jsxs("button",{className:"w-full py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(_,{size:16}),"Contacter"]})]})]})]},t.id)})}),g.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(R,{size:64,className:"mx-auto"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Aucun produit trouvé"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Essayez de modifier vos filtres ou de rechercher autre chose"}),e.jsx("button",{onClick:B,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Effacer les filtres"})]})]}),d&&i&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:$,children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.name}),e.jsx("button",{onClick:o,className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:e.jsx(C,{size:24})})]}),e.jsx("img",{src:i.image,alt:i.name,className:"w-full h-64 object-cover rounded-lg mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:i.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Prix unitaire"}),e.jsxs("div",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:[i.price.toFixed(2),"€"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"MOQ"}),e.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:i.moq})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Q,{to:`/product/${i.id}`,className:"flex-1 bg-blue-600 text-white py-3 rounded-lg font-semibold text-center hover:bg-blue-700 transition-colors",onClick:o,children:"Voir détails"}),e.jsx("button",{onClick:()=>N(i),className:"flex-1 bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 transition-colors",children:"Ajouter au devis"})]})]})})})]})};export{de as default};
